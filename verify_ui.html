<!DOCTYPE html>
<html>
<head>
    <title>Log Monitoring Verification</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ  - å‹•ä½œç¢ºèª</h1>

    <h2>ğŸ” APIå‹•ä½œç¢ºèª</h2>
    <div id="api-results"></div>

    <h2>ğŸ“‹ ç¢ºèªæ‰‹é †</h2>
    <div class="info result">
        <strong>ã‚¨ãƒ©ãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®ç¢ºèªæ–¹æ³•:</strong>
        <ol>
            <li>ãƒ–ãƒ©ã‚¦ã‚¶ã§ <a href="http://localhost:3000/log-monitoring" target="_blank">http://localhost:3000/log-monitoring</a> ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
            <li>ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã€Œã‚¨ãƒ©ãƒ¼ã®ã¿è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            <li>ãƒ­ã‚°ãƒªã‚¹ãƒˆãŒ6ä»¶ã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ã¿ã«æ¸›ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
            <li>ã€Œå…¨ãƒ­ã‚°è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦27ä»¶ã™ã¹ã¦ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
            <li>ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ã€Œã‚¨ãƒ©ãƒ¼ã€ãƒ•ã‚£ãƒ«ã‚¿ã§ã‚‚åŒæ§˜ã®å‹•ä½œã‚’ç¢ºèª</li>
        </ol>
    </div>

    <script>
        async function verifyAPI() {
            const results = document.getElementById('api-results');

            try {
                // Get token
                const loginResponse = await fetch('http://localhost:8000/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: 'admin', password: 'admin123' })
                });
                const { token } = await loginResponse.json();

                // Test all logs
                const allLogsResponse = await fetch('http://localhost:8000/api/logs/search?page=1&pageSize=10&sortBy=timestamp&sortOrder=desc', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const allLogs = await allLogsResponse.json();

                // Test error logs
                const errorLogsResponse = await fetch('http://localhost:8000/api/logs/search?levels=50,60&page=1&pageSize=10&sortBy=timestamp&sortOrder=desc', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                const errorLogs = await errorLogsResponse.json();

                results.innerHTML = `
                    <div class="success result">
                        âœ… å…¨ãƒ­ã‚°æ•°: ${allLogs.total}ä»¶
                    </div>
                    <div class="success result">
                        âœ… ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°æ•°: ${errorLogs.total}ä»¶
                    </div>
                    <div class="success result">
                        âœ… API ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ­£å¸¸å‹•ä½œ
                    </div>
                `;

            } catch (error) {
                results.innerHTML = `
                    <div class="error result">
                        âŒ APIæ¥ç¶šã‚¨ãƒ©ãƒ¼: ${error.message}
                    </div>
                `;
            }
        }

        verifyAPI();
    </script>
</body>
</html>