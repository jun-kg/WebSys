# アクセシビリティ設計書

## 📋 機能概要

### 目的
- WCAG 2.1 AA準拠のアクセシブルなWebアプリケーション
- ユニバーサルデザインの実現
- 多様なユーザーニーズへの対応
- 法的コンプライアンス確保

### 対象範囲
- 全UI要素・全画面
- フォント・色彩・操作系
- キーボードナビゲーション
- スクリーンリーダー対応

## 🎯 WCAG 2.1 AA準拠項目

### レベルA要件
- ✅ **1.1.1**: 非テキストコンテンツ（alt属性）
- ✅ **1.3.1**: 情報と関係性（見出し構造）
- ✅ **2.1.1**: キーボードアクセス
- ✅ **2.4.1**: ブロックスキップ（ナビゲーション）

### レベルAA要件
- ✅ **1.4.3**: コントラスト比4.5:1以上
- ✅ **1.4.4**: テキストサイズ変更200%対応
- ✅ **2.4.6**: 見出しとラベル
- ✅ **3.2.3**: 一貫したナビゲーション

## 🔤 フォント・タイポグラフィ

### UDフォント実装
```css
/* BIZ UDゴシック適用 */
font-family:
  "BIZ UDPGothic",            /* 最優先 */
  "BIZ UDGothic",
  "UD Digi Kyokasho NP-R",
  "UD Digi Kyokasho N-R",
  sans-serif;
```

### フォントサイズ基準
| 用途 | サイズ | line-height | 備考 |
|------|--------|-------------|------|
| 本文 | 16px | 1.6 | 最小推奨サイズ |
| 小文字 | 14px | 1.5 | 注釈・キャプション |
| 見出しH1 | 32px | 1.3 | ページタイトル |
| 見出しH2 | 24px | 1.4 | セクション |
| 見出しH3 | 20px | 1.5 | サブセクション |

### 読みやすさ向上
```css
/* 文字間隔・行間最適化 */
.accessible-text {
  font-size: 16px;
  line-height: 1.6;
  letter-spacing: 0.05em;    /* 文字間隔 */
  word-spacing: 0.1em;       /* 単語間隔 */
  text-align: left;          /* 左揃え固定 */
}
```

## 🎨 色彩・コントラスト設計

### カラーパレット
| 色 | 背景色 | 文字色 | コントラスト比 |
|----|--------|--------|---------------|
| プライマリ | #409EFF | #FFFFFF | 4.52:1 ✅ |
| セカンダリ | #67C23A | #FFFFFF | 4.89:1 ✅ |
| 警告 | #E6A23C | #FFFFFF | 4.51:1 ✅ |
| エラー | #F56C6C | #FFFFFF | 4.58:1 ✅ |
| 情報 | #909399 | #FFFFFF | 4.61:1 ✅ |

### カラーアクセシビリティ検証
```typescript
// コントラスト比計算
function calculateContrastRatio(color1: string, color2: string): number {
  const luminance1 = getLuminance(color1)
  const luminance2 = getLuminance(color2)
  const brighter = Math.max(luminance1, luminance2)
  const darker = Math.min(luminance1, luminance2)
  return (brighter + 0.05) / (darker + 0.05)
}

// WCAG AA準拠チェック
function isWCAGCompliant(ratio: number): boolean {
  return ratio >= 4.5  // AA要件
}
```

### 色以外の情報伝達
- ✅ **アイコン併用**: 色とアイコンの組み合わせ
- ✅ **テキストラベル**: 状態をテキストでも表示
- ✅ **パターン使用**: ハッチング・点線等

```vue
<!-- 色覚障害対応例 -->
<el-tag :type="status.type" :class="status.pattern">
  <el-icon><component :is="status.icon" /></el-icon>
  {{ status.text }}
</el-tag>
```

## ⌨️ キーボードナビゲーション

### キーボード操作要件
- ✅ **Tab順序**: 論理的な順序でフォーカス移動
- ✅ **Enter/Space**: ボタン・リンク実行
- ✅ **Arrow**: メニュー・リスト内移動
- ✅ **Escape**: モーダル・ドロップダウン閉じる

### フォーカス管理
```css
/* フォーカス表示強化 */
.keyboard-focus {
  outline: 3px solid #409EFF;
  outline-offset: 2px;
  box-shadow: 0 0 0 1px #ffffff;
}

/* カスタムフォーカス */
.common-button:focus-visible {
  outline: 3px solid #409EFF;
  outline-offset: 2px;
}
```

### タブインデックス設計
```typescript
interface TabSequence {
  navigation: 1-10      // ナビゲーション
  main: 11-100         // メインコンテンツ
  sidebar: 101-200     // サイドバー
  footer: 201-300      // フッター
}
```

## 🔊 スクリーンリーダー対応

### ARIA属性実装
```vue
<template>
  <!-- ランドマーク -->
  <main role="main" aria-label="メインコンテンツ">
    <!-- ナビゲーション -->
    <nav role="navigation" aria-label="メインナビゲーション">

    <!-- フォーム -->
    <form role="form" aria-label="ユーザー検索">
      <label for="username" aria-required="true">
        ユーザー名
      </label>
      <input
        id="username"
        aria-describedby="username-help"
        aria-invalid="false"
      />
      <div id="username-help" aria-live="polite">
        1-20文字で入力してください
      </div>
    </form>

    <!-- テーブル -->
    <table role="table" aria-label="ユーザー一覧">
      <caption>登録ユーザー一覧（全100件）</caption>
      <thead>
        <tr>
          <th scope="col" aria-sort="none">氏名</th>
          <th scope="col" aria-sort="ascending">部署</th>
        </tr>
      </thead>
    </table>
  </main>
</template>
```

### ライブリージョン
```vue
<!-- 動的コンテンツ通知 -->
<div aria-live="polite" aria-atomic="true">
  {{ statusMessage }}
</div>

<!-- 緊急通知 -->
<div aria-live="assertive" role="alert">
  {{ errorMessage }}
</div>
```

## 📱 タッチアクセシビリティ

### タッチターゲットサイズ
```css
/* 最小44pxターゲット */
.touch-accessible {
  min-height: 44px;
  min-width: 44px;
  padding: 12px;
}

/* 拡張タッチエリア */
.touch-extended::before {
  content: '';
  position: absolute;
  top: -12px; left: -12px;
  right: -12px; bottom: -12px;
  z-index: -1;
}
```

### ジェスチャー代替手段
- ✅ **スワイプ代替**: ボタンでのページ切り替え
- ✅ **ピンチ代替**: ズームボタン提供
- ✅ **ドラッグ代替**: ドロップダウン選択

## 🌐 多言語・国際化対応

### 言語設定
```typescript
// i18n設定
interface LocaleSettings {
  language: 'ja' | 'en'        // 言語
  direction: 'ltr' | 'rtl'     // 文字方向
  dateFormat: string           // 日付形式
  numberFormat: string         // 数値形式
}
```

### RTL対応準備
```css
/* 論理プロパティ使用 */
.content {
  margin-inline-start: 16px;   /* margin-left: の代替 */
  margin-inline-end: 16px;     /* margin-right: の代替 */
  padding-block: 12px;         /* padding-top/bottom: */
  padding-inline: 16px;        /* padding-left/right: */
}
```

## 🧪 アクセシビリティテスト

### 自動テストツール
```bash
# axe-core による自動検証
npm install @axe-core/playwright

# Lighthouse Accessibility Audit
lighthouse --only-categories=accessibility http://localhost:3000
```

### 手動テスト項目
- [ ] **キーボードのみ操作**: マウス無しで全機能利用
- [ ] **スクリーンリーダー**: NVDA/JAWSでの読み上げ
- [ ] **拡大表示**: 200%ズームでの表示確認
- [ ] **色覚シミュレート**: 色覚障害での認識確認

### E2Eアクセシビリティテスト
```typescript
// Playwright + axe-core
test('Accessibility compliance', async ({ page }) => {
  await page.goto('/dashboard')

  // axe-core スキャン
  const accessibilityScanResults = await page.evaluate(async () => {
    const axe = await import('axe-core')
    return await axe.run()
  })

  // 違反がないことを確認
  expect(accessibilityScanResults.violations).toHaveLength(0)
})
```

## 📋 チェックリスト

### 開発時確認事項
- [ ] フォームラベルの適切な関連付け
- [ ] 画像のalt属性設定
- [ ] 見出し階層の論理的構造
- [ ] キーボードフォーカス順序
- [ ] カラーコントラスト比4.5:1以上
- [ ] ARIA属性の適切な使用

### リリース前確認
- [ ] axe-core自動テスト合格
- [ ] Lighthouse Accessibility Score 90点以上
- [ ] キーボードナビゲーション完全動作
- [ ] スクリーンリーダー読み上げ確認

## 🚀 実装状況

### 完了済み
- ✅ BIZ UDゴシックフォント適用
- ✅ WCAG 2.1 AA カラーコントラスト
- ✅ キーボードナビゲーション
- ✅ ARIA属性実装
- ✅ タッチアクセシビリティ

### 今後の改善
- ⚠️ より詳細なARIA実装
- ⚠️ 音声ガイダンス機能
- ⚠️ ハイコントラストモード
- ⚠️ リダクションモーション対応

## 📋 関連ドキュメント

- [共通コンポーネント設計書](../04_共通コンポーネント/)
- [レスポンシブ対応設計書](../05_レスポンシブ対応/)
- [ユニバーサルデザインガイドライン](../../12-03_ユニバーサルデザインガイドライン.md)

---

**作成日**: 2025年1月20日
**最終更新**: 2025年1月20日
**作成者**: Claude
**レビュー者**: -