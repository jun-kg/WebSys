# å³åº§å®Ÿè¡Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³

## ğŸš¨ Priority 1: ä»Šã™ãå®Ÿè¡Œï¼ˆ30åˆ†ä»¥å†…ï¼‰

### 1. æœªã‚³ãƒŸãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†ã¨ã‚³ãƒŸãƒƒãƒˆ

#### ğŸ“ å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«é¸åˆ¥
```bash
# æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ ¸å¿ƒãƒ•ã‚¡ã‚¤ãƒ«
backend/src/routes/permissions.ts    # æ¨©é™APIå®Œå…¨å®Ÿè£…
frontend/src/views/PermissionMatrix.vue  # æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º

# æ©Ÿèƒ½ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
backend/src/routes/features.ts       # æ©Ÿèƒ½ç®¡ç†API
frontend/src/views/FeatureManagement.vue # æ©Ÿèƒ½ç®¡ç†ç”»é¢

# çµ„ç¹”ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
backend/src/routes/companies.ts      # ä¼šç¤¾ç®¡ç†API
backend/src/routes/departments.ts    # éƒ¨ç½²ç®¡ç†API
frontend/src/views/Companies.vue     # ä¼šç¤¾ç®¡ç†ç”»é¢
frontend/src/views/Departments.vue   # éƒ¨ç½²ç®¡ç†ç”»é¢
```

#### ğŸ”§ å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```bash
cd /home/typho/src/elementplus/websys/workspace

# ãƒ•ã‚§ãƒ¼ã‚º1: æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
git add backend/src/routes/permissions.ts frontend/src/views/PermissionMatrix.vue
git commit -m "feat: æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹è¡¨ç¤ºã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†æ©Ÿèƒ½å®Œæˆ

- æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹å‹•çš„è¡¨ç¤ºå®Ÿè£…
- æ¨©é™ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆCRUDå®Œå…¨å®Ÿè£…
- éƒ¨ç½²Ã—æ©Ÿèƒ½æ¨©é™å¯è¦–åŒ–
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¨©é™æ›´æ–°æ©Ÿèƒ½

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)
Co-Authored-By: Claude <noreply@anthropic.com>"

# ãƒ•ã‚§ãƒ¼ã‚º2: æ©Ÿèƒ½ãƒ»çµ„ç¹”ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
git add backend/src/routes/features.ts backend/src/routes/companies.ts backend/src/routes/departments.ts
git add frontend/src/views/FeatureManagement.vue frontend/src/views/Companies.vue frontend/src/views/Departments.vue
git commit -m "feat: æ©Ÿèƒ½ç®¡ç†ãƒ»çµ„ç¹”ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ

- æ©Ÿèƒ½ãƒã‚¹ã‚¿ç®¡ç†CRUDå®Ÿè£…
- ä¼šç¤¾ãƒ»éƒ¨ç½²ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- éšå±¤æ§‹é€ å¯¾å¿œéƒ¨ç½²ç®¡ç†
- æ©Ÿèƒ½ã‚«ãƒ†ã‚´ãƒªç®¡ç†

ğŸ¤– Generated with [Claude Code](https://claude.ai/code)
Co-Authored-By: Claude <noreply@anthropic.com>"
```

### 2. BUG #003ä¿®æ­£ - IPv6 Rate Limiting

#### ğŸ“ ä¿®æ­£ç®‡æ‰€
**ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/src/routes/auth.ts:14`

#### ğŸ”§ ä¿®æ­£å†…å®¹
```typescript
// ä¿®æ­£å‰
import rateLimit from 'express-rate-limit';

const loginRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 5,
  keyGenerator: (req) => req.ip,  // â† å•é¡Œç®‡æ‰€
  message: { /* ... */ }
});

// ä¿®æ­£å¾Œ
import rateLimit, { ipKeyGenerator } from 'express-rate-limit';

const loginRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 5,
  keyGenerator: ipKeyGenerator,  // â† ä¿®æ­£
  message: { /* ... */ }
});
```

#### ğŸ§ª ãƒ†ã‚¹ãƒˆç¢ºèª
```bash
# ä¿®æ­£å¾Œã€IPv6è­¦å‘ŠãŒæ¶ˆãˆã‚‹ã“ã¨ã‚’ç¢ºèª
docker compose logs backend | grep -i "ipv6"
# è­¦å‘ŠãŒå‡ºåŠ›ã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
```

## âš¡ Priority 2: ä»Šæ—¥ä¸­ã«å®Ÿè¡Œï¼ˆ2-3æ™‚é–“ï¼‰

### 3. ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬å®Ÿè£…

#### ğŸ“ å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
backend/src/routes/logs.ts           # æ—¢å­˜æ‹¡å¼µ
  â”œâ”€â”€ GET /api/logs/search           # ãƒ­ã‚°æ¤œç´¢APIæ‹¡å¼µ
  â”œâ”€â”€ GET /api/logs/statistics       # çµ±è¨ˆAPIæ‹¡å¼µ
  â””â”€â”€ GET /api/logs/realtime         # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–

frontend/src/views/LogDashboard.vue  # æ–°è¦ä½œæˆ
frontend/src/views/LogSearch.vue     # æ–°è¦ä½œæˆ
frontend/src/components/LogChart.vue # æ–°è¦ä½œæˆ
```

#### ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½
1. **ãƒ­ã‚°æ¤œç´¢APIæ‹¡å¼µ** (30åˆ†)
2. **LogDashboard.vueä½œæˆ** (60åˆ†)
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºæ©Ÿèƒ½** (60åˆ†)
4. **ãƒ­ã‚°çµ±è¨ˆãƒãƒ£ãƒ¼ãƒˆ** (30åˆ†)

#### ğŸ“Š LogDashboard.vue åŸºæœ¬æ§‹é€ 
```vue
<template>
  <div class="log-dashboard">
    <!-- çµ±è¨ˆã‚«ãƒ¼ãƒ‰ -->
    <el-row :gutter="20">
      <el-col :span="6">
        <el-card>
          <el-statistic title="ä»Šæ—¥ã®ãƒ­ã‚°" :value="stats.todayCount" />
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <el-statistic title="ã‚¨ãƒ©ãƒ¼æ•°" :value="stats.errorCount" />
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <el-statistic title="è­¦å‘Šæ•°" :value="stats.warnCount" />
        </el-card>
      </el-col>
      <el-col :span="6">
        <el-card>
          <el-statistic title="ã‚¨ãƒ©ãƒ¼ç‡" :value="stats.errorRate" suffix="%" />
        </el-card>
      </el-col>
    </el-row>

    <!-- ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«åˆ¥ãƒãƒ£ãƒ¼ãƒˆ -->
    <el-card class="chart-card">
      <template #header>ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«åˆ¥çµ±è¨ˆ</template>
      <LogChart :data="chartData" />
    </el-card>

    <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚° -->
    <el-card class="log-table-card">
      <template #header>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°</template>
      <el-table :data="realtimeLogs" v-loading="loading">
        <el-table-column prop="timestamp" label="æ™‚åˆ»" width="180" />
        <el-table-column prop="level" label="ãƒ¬ãƒ™ãƒ«" width="100">
          <template #default="scope">
            <el-tag :type="getLogLevelType(scope.row.level)">
              {{ scope.row.level }}
            </el-tag>
          </template>
        </el-table-column>
        <el-table-column prop="message" label="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸" />
        <el-table-column prop="source" label="ã‚½ãƒ¼ã‚¹" width="120" />
      </el-table>
    </el-card>
  </div>
</template>
```

## ğŸ“‹ ä»Šæ—¥ã®å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… å®Œäº†ç¢ºèªé …ç›®
- [ ] **æ¨©é™ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒŸãƒƒãƒˆ**
  - [ ] permissions.ts ã‚³ãƒŸãƒƒãƒˆ
  - [ ] PermissionMatrix.vue ã‚³ãƒŸãƒƒãƒˆ
  - [ ] æ¨©é™ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆAPIå‹•ä½œç¢ºèª

- [ ] **æ©Ÿèƒ½ãƒ»çµ„ç¹”ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒŸãƒƒãƒˆ**
  - [ ] features.ts, companies.ts, departments.ts ã‚³ãƒŸãƒƒãƒˆ
  - [ ] å¯¾å¿œã™ã‚‹Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚³ãƒŸãƒƒãƒˆ
  - [ ] APIå‹•ä½œç¢ºèª

- [ ] **BUG #003ä¿®æ­£**
  - [ ] auth.tsä¿®æ­£
  - [ ] IPv6è­¦å‘Šæ¶ˆå¤±ç¢ºèª
  - [ ] Rate Limitingæ­£å¸¸å‹•ä½œç¢ºèª

- [ ] **ãƒ­ã‚°ç›£è¦–åŸºæœ¬æ©Ÿèƒ½**
  - [ ] LogDashboard.vueä½œæˆ
  - [ ] åŸºæœ¬çµ±è¨ˆè¡¨ç¤º
  - [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°è¡¨ç¤º

### ğŸ§ª å‹•ä½œç¢ºèªãƒ†ã‚¹ãƒˆ
```bash
# 1. æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
curl -X GET "http://localhost:8000/api/permissions/matrix?companyId=1" \
  -H "Authorization: Bearer $TOKEN"

# 2. çµ±è¨ˆAPI
curl -X GET "http://localhost:8000/api/statistics/dashboard" \
  -H "Authorization: Bearer $TOKEN"

# 3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹
curl -s http://localhost:3000 | head -1

# 4. ãƒ­ã‚°API
curl -X GET "http://localhost:8000/api/logs/search?level=ERROR" \
  -H "Authorization: Bearer $TOKEN"
```

## ğŸ¯ æœŸå¾…ã™ã‚‹æˆæœ

### å®Œäº†å¾Œã®çŠ¶æ³
- **ã‚·ã‚¹ãƒ†ãƒ å®Œæˆåº¦**: 90% â†’ 95%
- **æ®‹ã‚ŠBUG**: 2ä»¶ â†’ 1ä»¶
- **ã‚³ãƒŸãƒƒãƒˆæ¸ˆã¿æ©Ÿèƒ½**: æ¨©é™ç®¡ç†ãƒ»çµ„ç¹”ç®¡ç†å®Œå…¨å®Ÿè£…
- **ãƒ­ã‚°ç›£è¦–**: åŸºæœ¬æ©Ÿèƒ½å‹•ä½œé–‹å§‹

### æ¬¡æœŸå¯¾å¿œæº–å‚™
- æ¨©é™ç¶™æ‰¿ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆå®Œäº†
- é«˜åº¦ãƒ­ã‚°åˆ†ææ©Ÿèƒ½è¨­è¨ˆé–‹å§‹
- é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«éª¨å­ä½œæˆ

---

**å®Ÿè¡Œé–‹å§‹æ™‚åˆ»**: è¨˜éŒ²ç”¨
**å®Œäº†äºˆå®šæ™‚åˆ»**: å®Ÿè¡Œé–‹å§‹ã‹ã‚‰3æ™‚é–“å¾Œ
**æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Phase 3ã®è©³ç´°è¨ˆç”»ç­–å®š