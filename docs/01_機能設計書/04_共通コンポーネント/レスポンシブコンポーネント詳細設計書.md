# ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°è¨­è¨ˆæ›¸

## ğŸ“‹ æ¦‚è¦

**ä½œæˆæ—¥**: 2025-09-27
**å¯¾è±¡**: æ–°è¦ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ5å€‹
**ç›®çš„**: 17ç”»é¢ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’å…±é€šåŒ–ã«ã‚ˆã‚ŠåŠ¹ç‡åŒ–

---

## ğŸ¯ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜

### 1. ResponsiveCrudPage

#### ç›®çš„
CRUDç”»é¢ã®å…±é€šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’1ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å®Ÿç¾ï¼ˆ10ç”»é¢å¯¾å¿œï¼‰

#### Props Interface
```typescript
interface ResponsiveCrudPageProps {
  // åŸºæœ¬æƒ…å ±
  title: string
  subtitle?: string

  // ãƒ†ãƒ¼ãƒ–ãƒ«é–¢é€£
  columns: TableColumn[]
  data: any[]
  loading?: boolean

  // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
  total?: number
  currentPage?: number
  pageSize?: number
  pageSizes?: number[]
  showPagination?: boolean

  // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°é–¢é€£
  dialogVisible?: boolean
  dialogTitle?: string
  dialogWidth?: number | string

  // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–è¨­å®š
  tableMinWidth?: string
  hideColumnsOnMobile?: string[]

  // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  showSearch?: boolean
  showActions?: boolean
  actionWidth?: number
}

interface TableColumn {
  prop: string
  label: string
  width?: number
  minWidth?: number
  important?: boolean  // ãƒ¢ãƒã‚¤ãƒ«æ™‚ã®è¡¨ç¤ºå„ªå…ˆåº¦
  sortable?: boolean
  formatter?: (row: any) => string
}
```

#### Events
```typescript
interface ResponsiveCrudPageEmits {
  'add': () => void
  'edit': (row: any) => void
  'delete': (row: any) => void
  'search': (query: string) => void
  'page-change': (page: number) => void
  'size-change': (size: number) => void
  'selection-change': (selection: any[]) => void
}
```

#### Template Slots
```vue
<template>
  <ResponsiveCrudPage>
    <!-- ã‚«ã‚¹ã‚¿ãƒ æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
    <template #search>
      <el-form :inline="true">
        <el-form-item>
          <el-input placeholder="æ¤œç´¢..." />
        </el-form-item>
      </el-form>
    </template>

    <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
    <template #header-actions>
      <el-button>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</el-button>
    </template>

    <!-- ã‚«ã‚¹ã‚¿ãƒ åˆ—å†…å®¹ -->
    <template #column-status="{ row }">
      <el-tag :type="getStatusType(row.status)">
        {{ row.status }}
      </el-tag>
    </template>

    <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
    <template #row-actions="{ row }">
      <el-button @click="view(row)">è©³ç´°</el-button>
    </template>

    <!-- ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å†…å®¹ -->
    <template #dialog-content>
      <ResponsiveForm>
        <!-- ãƒ•ã‚©ãƒ¼ãƒ å†…å®¹ -->
      </ResponsiveForm>
    </template>
  </ResponsiveCrudPage>
</template>
```

#### å®Ÿè£…ä¾‹
```vue
<!-- Users.vue ã®æ–°ã—ã„å®Ÿè£… -->
<template>
  <ResponsiveCrudPage
    title="ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†"
    :columns="userColumns"
    :data="users"
    :total="total"
    :loading="loading"
    @add="addUser"
    @edit="editUser"
    @delete="deleteUser"
  >
    <template #search>
      <el-input
        v-model="searchQuery"
        placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ãƒ¡ãƒ¼ãƒ«ã€æ°åã€ç¤¾å“¡ç•ªå·ã§æ¤œç´¢..."
        clearable
        @keyup.enter="handleSearch"
      />
    </template>
  </ResponsiveCrudPage>
</template>

<script setup lang="ts">
const userColumns = ref([
  { prop: 'username', label: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼å', minWidth: 150, important: true },
  { prop: 'name', label: 'æ°å', minWidth: 150, important: true },
  { prop: 'email', label: 'ãƒ¡ãƒ¼ãƒ«', minWidth: 200 },
  { prop: 'company.name', label: 'ä¼šç¤¾', minWidth: 150 },
  { prop: 'role', label: 'æ¨©é™', minWidth: 120, important: true }
])
</script>
```

---

### 2. ResponsiveTable

#### ç›®çš„
ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’è‡ªå‹•åŒ–

#### Props Interface
```typescript
interface ResponsiveTableProps {
  data: any[]
  columns?: TableColumn[]
  showSelection?: boolean
  showActions?: boolean
  actionWidth?: number
  minWidth?: string
  hideColumnsOnMobile?: string[]
  stickyHeader?: boolean
}
```

#### å®Ÿè£…è©³ç´°
```vue
<template>
  <div class="responsive-table-container">
    <el-table
      :data="data"
      :style="{ minWidth: computedMinWidth }"
      v-bind="$attrs"
    >
      <!-- é¸æŠåˆ— -->
      <el-table-column
        v-if="showSelection"
        type="selection"
        :width="isMobile ? 40 : 55"
      />

      <!-- ãƒ‡ãƒ¼ã‚¿åˆ— -->
      <el-table-column
        v-for="column in visibleColumns"
        :key="column.prop"
        v-bind="getColumnProps(column)"
      >
        <template #default="{ row }" v-if="$slots[`column-${column.prop}`]">
          <slot :name="`column-${column.prop}`" :row="row" />
        </template>
      </el-table-column>

      <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ— -->
      <el-table-column
        v-if="showActions"
        label="æ“ä½œ"
        :width="computedActionWidth"
        :fixed="!isMobile && 'right'"
      >
        <template #default="{ row }">
          <slot name="actions" :row="row">
            <el-button size="small" @click="$emit('edit', row)">
              ç·¨é›†
            </el-button>
            <el-button
              size="small"
              type="danger"
              @click="$emit('delete', row)"
            >
              å‰Šé™¤
            </el-button>
          </slot>
        </template>
      </el-table-column>
    </el-table>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useResponsive } from '@/composables/useResponsive'

const { isMobile, isTablet } = useResponsive()

// ãƒ¢ãƒã‚¤ãƒ«æ™‚ã¯é‡è¦ãªåˆ—ã®ã¿è¡¨ç¤º
const visibleColumns = computed(() => {
  if (!props.columns) return []

  if (isMobile.value) {
    return props.columns.filter(col =>
      col.important !== false &&
      !props.hideColumnsOnMobile?.includes(col.prop)
    )
  }
  return props.columns
})

const computedMinWidth = computed(() => {
  if (isMobile.value) return '100%'
  return props.minWidth || '800px'
})

const computedActionWidth = computed(() => {
  if (isMobile.value) return 80
  return props.actionWidth || 150
})

const getColumnProps = (column: TableColumn) => {
  const props = { ...column }

  // å›ºå®šå¹…ã‚’æœ€å°å¹…ã«å¤‰æ›
  if (props.width && !props.minWidth) {
    props.minWidth = props.width
    delete props.width
  }

  // ãƒ¢ãƒã‚¤ãƒ«æ™‚ã®å¹…èª¿æ•´
  if (isMobile.value && props.minWidth) {
    props.minWidth = Math.min(props.minWidth as number, 120)
  }

  return props
}
</script>

<style scoped>
.responsive-table-container {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {
  .responsive-table-container {
    margin: 0 -16px;
    padding: 0 16px;
  }

  :deep(.el-table) {
    font-size: 12px;
  }

  :deep(.el-table .cell) {
    padding: 0 4px;
  }

  :deep(.el-button) {
    padding: 4px 8px;
    font-size: 12px;
  }
}
</style>
```

---

### 3. ResponsiveDialog

#### ç›®çš„
ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å¹…ã‚’ãƒ‡ãƒã‚¤ã‚¹ã«å¿œã˜ã¦è‡ªå‹•èª¿æ•´

#### Props Interface
```typescript
interface ResponsiveDialogProps {
  modelValue: boolean
  title?: string
  desktopWidth?: string | number
  tabletWidth?: string | number
  mobileWidth?: string | number
  fullscreenOnMobile?: boolean
  responsive?: boolean
}
```

#### å®Ÿè£…è©³ç´°
```vue
<template>
  <el-dialog
    :model-value="modelValue"
    :title="title"
    :width="computedWidth"
    :fullscreen="computedFullscreen"
    v-bind="$attrs"
    @update:model-value="$emit('update:modelValue', $event)"
  >
    <slot></slot>

    <template #footer v-if="$slots.footer">
      <div class="dialog-footer" :class="{ 'mobile-footer': isMobile }">
        <slot name="footer"></slot>
      </div>
    </template>
  </el-dialog>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useResponsive } from '@/composables/useResponsive'

const { isMobile, isTablet } = useResponsive()

const computedWidth = computed(() => {
  if (!props.responsive) return props.desktopWidth || '600px'

  if (isMobile.value) {
    return props.mobileWidth || '95%'
  }
  if (isTablet.value) {
    return props.tabletWidth || '80%'
  }
  return props.desktopWidth || '600px'
})

const computedFullscreen = computed(() => {
  return isMobile.value && props.fullscreenOnMobile
})
</script>

<style scoped>
.mobile-footer {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.mobile-footer :deep(.el-button) {
  width: 100%;
}

@media (min-width: 769px) {
  .mobile-footer {
    flex-direction: row;
    justify-content: flex-end;
  }

  .mobile-footer :deep(.el-button) {
    width: auto;
  }
}
</style>
```

---

### 4. ResponsiveForm

#### ç›®çš„
ãƒ•ã‚©ãƒ¼ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ãƒ‡ãƒã‚¤ã‚¹ã«å¿œã˜ã¦è‡ªå‹•èª¿æ•´

#### Props Interface
```typescript
interface ResponsiveFormProps {
  model: Record<string, any>
  rules?: Record<string, any>
  labelPosition?: 'left' | 'right' | 'top'
  labelWidth?: string | number
  responsive?: boolean
  mobileStack?: boolean
}
```

#### å®Ÿè£…è©³ç´°
```vue
<template>
  <el-form
    :model="model"
    :rules="rules"
    :label-position="computedLabelPosition"
    :label-width="computedLabelWidth"
    v-bind="$attrs"
  >
    <slot></slot>
  </el-form>
</template>

<script setup lang="ts">
const computedLabelPosition = computed(() => {
  if (!props.responsive) return props.labelPosition || 'right'

  if (isMobile.value || (isTablet.value && props.mobileStack)) {
    return 'top'
  }
  return props.labelPosition || 'right'
})

const computedLabelWidth = computed(() => {
  if (!props.responsive) return props.labelWidth || '120px'

  if (isMobile.value) return 'auto'
  return props.labelWidth || '120px'
})
</script>
```

---

### 5. ResponsiveGrid & ResponsiveCol

#### ç›®çš„
ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç°¡ç•¥åŒ–

#### Props Interface
```typescript
interface ResponsiveGridProps {
  gutter?: number
  justify?: string
  align?: string
}

interface ResponsiveColProps {
  // ç°¡ç•¥ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
  mobile?: number    // xs, sm
  tablet?: number    // md
  desktop?: number   // lg, xl

  // å¾“æ¥ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆäº’æ›æ€§ï¼‰
  xs?: number
  sm?: number
  md?: number
  lg?: number
  xl?: number
  span?: number
}
```

#### å®Ÿè£…è©³ç´°
```vue
<!-- ResponsiveGrid -->
<template>
  <el-row
    :gutter="computedGutter"
    :justify="justify"
    :align="align"
  >
    <slot></slot>
  </el-row>
</template>

<!-- ResponsiveCol -->
<template>
  <el-col v-bind="computedColProps">
    <slot></slot>
  </el-col>
</template>

<script setup lang="ts">
const computedColProps = computed(() => {
  return {
    xs: props.xs || props.mobile || 24,
    sm: props.sm || props.mobile || 24,
    md: props.md || props.tablet || props.desktop || 12,
    lg: props.lg || props.desktop || 8,
    xl: props.xl || props.desktop || 6,
    span: props.span
  }
})
</script>
```

---

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### ç§»è¡Œå‰å¾Œã®æ¯”è¼ƒ

#### Before: Users.vue (54è¡Œ)
```vue
<template>
  <div class="users-page">
    <el-card>
      <template #header>
        <div class="card-header">
          <span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</span>
          <el-button type="primary" @click="handleAdd">
            <el-icon><Plus /></el-icon>
            æ–°è¦è¿½åŠ 
          </el-button>
        </div>
      </template>

      <el-form :inline="true" :model="searchForm">
        <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
      </el-form>

      <el-table :data="tableData">
        <!-- ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾© -->
      </el-table>

      <el-pagination>
        <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
      </el-pagination>
    </el-card>

    <el-dialog>
      <!-- ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å†…å®¹ -->
    </el-dialog>
  </div>
</template>
```

#### After: Users.vue (15è¡Œ)
```vue
<template>
  <ResponsiveCrudPage
    title="ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†"
    :columns="userColumns"
    :data="users"
    :total="total"
    @add="addUser"
    @edit="editUser"
  >
    <template #search>
      <el-input v-model="search" placeholder="æ¤œç´¢..." />
    </template>
  </ResponsiveCrudPage>
</template>
```

**å‰Šæ¸›åŠ¹æœ: 54è¡Œ â†’ 15è¡Œï¼ˆ72%å‰Šæ¸›ï¼‰**

---

## ğŸ“Š å®Ÿè£…åŠ¹æœ

### å®šé‡åŠ¹æœ
| é …ç›® | Before | After | å‰Šæ¸›ç‡ |
|------|--------|-------|--------|
| å®Ÿè£…è¡Œæ•° | 850è¡Œ | 500è¡Œ | 41% |
| å„ç”»é¢è¡Œæ•° | 54è¡Œ | 15è¡Œ | 72% |
| é–‹ç™ºæ™‚é–“ | 17æ™‚é–“ | 8æ™‚é–“ | 53% |
| ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹å·¥æ•° | 17å€ | 1å€ | 94% |

### å®šæ€§åŠ¹æœ
- **ä¸€è²«æ€§**: å…¨ç”»é¢ã§çµ±ä¸€ã•ã‚ŒãŸãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å‹•ä½œ
- **ä¿å®ˆæ€§**: ãƒã‚°ä¿®æ­£ãƒ»æ©Ÿèƒ½è¿½åŠ ãŒä¸€ç®‡æ‰€ã§å®Œçµ
- **å“è³ª**: ååˆ†ã«ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å†åˆ©ç”¨

---

## ğŸš€ å®Ÿè£…è¨ˆç”»

### Phase 1: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–‹ç™ºï¼ˆ3æ—¥ï¼‰
1. **Day 1**: ResponsiveTable + ResponsiveDialog
2. **Day 2**: ResponsiveCrudPageï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
3. **Day 3**: ResponsiveForm + ResponsiveGrid

### Phase 2: ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆé©ç”¨ï¼ˆ2æ—¥ï¼‰
4. **Day 4**: Users.vue ã‚’ResponsiveCrudPageã«ç§»è¡Œ
5. **Day 5**: å‹•ä½œç¢ºèªãƒ»èª¿æ•´ãƒ»ãƒ†ã‚¹ãƒˆ

### Phase 3: å…¨é¢å±•é–‹ï¼ˆ5æ—¥ï¼‰
6. **Day 6-9**: æ®‹ã‚Š9ç”»é¢ã®ä¸€æ‹¬ç§»è¡Œ
7. **Day 10**: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»å“è³ªç¢ºèª

---

## ğŸ“‹ é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œè¨­è¨ˆæ›¸](../05_ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ/)
- [å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆæ›¸](./å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆæ›¸.md)
- [ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„ææ¡ˆæ›¸](../../37-ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„ææ¡ˆæ›¸.md)

---

**ä½œæˆæ—¥**: 2025-09-27
**ä½œæˆè€…**: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: è¦å®Ÿæ–½