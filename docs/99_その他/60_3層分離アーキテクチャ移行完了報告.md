# 3å±¤åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç§»è¡Œå®Œäº†å ±å‘Š

**æ—¥ä»˜**: 2025-10-01
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… ç§»è¡Œå®Œäº†
**å½±éŸ¿ç¯„å›²**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å…¨ä½“

---

## ğŸ“‹ æ¦‚è¦

å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ã‚’å®Œå…¨åˆ†é›¢ã™ã‚‹**3å±¤åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã¸ã®ç§»è¡ŒãŒå®Œäº†ã—ã¾ã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€å…±é€šæ©Ÿèƒ½æ›´æ–°æ™‚ã«ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã‚¼ãƒ­ã€é€†ã‚‚åŒæ§˜ã«å½±éŸ¿ã‚¼ãƒ­ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

## ğŸ¯ 3å±¤åˆ†é›¢ã®å®šç¾©

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | å¤‰æ›´å¯å¦ | å½±éŸ¿ç¯„å›² | ç”¨é€” | ãƒ•ã‚¡ã‚¤ãƒ«æ•° |
|---------|---------|---------|------|-----------|
| **core/** | âŒ å¤‰æ›´ç¦æ­¢ | å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å…±é€šåŸºç›¤æ©Ÿèƒ½ | BE: 23, FE: 36 |
| **extensions/** | âœ… æ‹¡å¼µå¯èƒ½ | å€‹åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å…±é€šæ©Ÿèƒ½ã®æ‹¡å¼µ | æœªä½¿ç”¨ï¼ˆå°†æ¥ç”¨ï¼‰ |
| **custom/** | âœ… è‡ªç”±å®Ÿè£… | å€‹åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | ä¼æ¥­å›ºæœ‰ãƒ­ã‚¸ãƒƒã‚¯ | BE: 29, FE: 37 |

## ğŸ“ ç§»è¡Œå¾Œã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```
workspace/backend/src/
â”œâ”€â”€ core/                    # å…±é€šã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ23ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ prisma.ts       # Prismaçµ±åˆã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts         # èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ LogController.ts
â”‚   â”‚   â””â”€â”€ AlertRuleController.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ AlertRuleEngine.ts
â”‚   â”‚   â”œâ”€â”€ NotificationService.ts
â”‚   â”‚   â”œâ”€â”€ AuditService.ts
â”‚   â”‚   â””â”€â”€ WebSocketService.ts
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ logs.ts
â”‚   â”‚   â”œâ”€â”€ alertRules.ts
â”‚   â”‚   â”œâ”€â”€ notifications.ts
â”‚   â”‚   â””â”€â”€ permissions/    # æ¨©é™ç®¡ç†ãƒ«ãƒ¼ãƒˆå…¨ä½“
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ log.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ validation.ts
â”‚       â””â”€â”€ saga.ts
â”‚
â”œâ”€â”€ extensions/              # æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆï¼ˆå°†æ¥ç”¨ï¼‰
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ custom/                  # ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ï¼ˆ29ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
    â”œâ”€â”€ routes/
    â”‚   â”œâ”€â”€ companies.ts
    â”‚   â”œâ”€â”€ departments.ts
    â”‚   â”œâ”€â”€ users.ts
    â”‚   â”œâ”€â”€ reports.ts
    â”‚   â”œâ”€â”€ health.ts
    â”‚   â”œâ”€â”€ approval.ts
    â”‚   â”œâ”€â”€ permissionInheritance.ts
    â”‚   â””â”€â”€ workflow/        # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼APIå…¨ä½“
    â”œâ”€â”€ services/
    â”‚   â”œâ”€â”€ ApprovalService.ts
    â”‚   â”œâ”€â”€ EmergencyApprovalService.ts
    â”‚   â”œâ”€â”€ ApprovalDelegationService.ts
    â”‚   â”œâ”€â”€ ProxyApprovalService.ts
    â”‚   â”œâ”€â”€ ParallelApprovalService.ts
    â”‚   â”œâ”€â”€ SequentialApprovalService.ts
    â”‚   â”œâ”€â”€ AutoApprovalService.ts
    â”‚   â”œâ”€â”€ PermissionInheritanceService.ts
    â”‚   â””â”€â”€ SystemHealthService.ts
    â”œâ”€â”€ controllers/
    â”‚   â””â”€â”€ ReportController.ts
    â””â”€â”€ utils/
        â”œâ”€â”€ dataConsistency.ts
        â””â”€â”€ featureFlags.ts
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```
workspace/frontend/src/
â”œâ”€â”€ core/                    # å…±é€šã‚³ã‚¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ36ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ log-monitoring/  # ãƒ­ã‚°ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ8ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
â”‚   â”‚   â”œâ”€â”€ common/          # VirtualScrollerç­‰
â”‚   â”‚   â””â”€â”€ permissions/     # æ¨©é™ç®¡ç†UI
â”‚   â”œâ”€â”€ composables/
â”‚   â”‚   â”œâ”€â”€ useLogService.ts
â”‚   â”‚   â””â”€â”€ useWebSocket.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ logs.ts
â”‚   â”‚   â””â”€â”€ permissions.ts
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ log.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ auth.ts
â”‚       â”œâ”€â”€ validation.ts
â”‚       â””â”€â”€ messages/
â”‚
â”œâ”€â”€ extensions/              # æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆï¼ˆå°†æ¥ç”¨ï¼‰
â”‚   â””â”€â”€ README.md
â”‚
â””â”€â”€ custom/                  # ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ï¼ˆ37ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
    â”œâ”€â”€ views/               # å…¨ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    â”‚   â”œâ”€â”€ Layout.vue
    â”‚   â”œâ”€â”€ Dashboard.vue
    â”‚   â”œâ”€â”€ Companies.vue
    â”‚   â”œâ”€â”€ Departments.vue
    â”‚   â”œâ”€â”€ Users.vue
    â”‚   â”œâ”€â”€ LogMonitoring.vue
    â”‚   â”œâ”€â”€ AlertRules.vue
    â”‚   â”œâ”€â”€ Reports.vue
    â”‚   â”œâ”€â”€ SystemHealth.vue
    â”‚   â”œâ”€â”€ WorkflowDashboard.vue
    â”‚   â”œâ”€â”€ WorkflowRequests.vue
    â”‚   â”œâ”€â”€ ApprovalProcess.vue
    â”‚   â””â”€â”€ ApprovalRoutes.vue
    â”œâ”€â”€ components/
    â”‚   â””â”€â”€ visualization/
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ companies.ts
    â”‚   â”œâ”€â”€ departments.ts
    â”‚   â”œâ”€â”€ users.ts
    â”‚   â”œâ”€â”€ features.ts
    â”‚   â””â”€â”€ health.ts
    â”œâ”€â”€ types/
    â”‚   â”œâ”€â”€ company.ts
    â”‚   â””â”€â”€ department.ts
    â””â”€â”€ utils/
        â””â”€â”€ date.ts
```

## ğŸ”§ ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (vite.config.ts)
```typescript
resolve: {
  alias: {
    '@': path.resolve(__dirname, './src'),
    '@core': path.resolve(__dirname, './src/core'),
    '@extensions': path.resolve(__dirname, './src/extensions'),
    '@custom': path.resolve(__dirname, './src/custom')
  }
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (tsconfig.json)
```json
{
  "paths": {
    "@/*": ["src/*"],
    "@core/*": ["src/core/*"],
    "@extensions/*": ["src/extensions/*"],
    "@custom/*": ["src/custom/*"]
  }
}
```

## ğŸ“ ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¦ç´„

### âœ… æ­£ã—ã„ä½¿ç”¨ä¾‹

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```typescript
// å…±é€šã‚³ã‚¢æ©Ÿèƒ½ã®åˆ©ç”¨
import { prisma } from '@core/lib/prisma'
import { authenticate } from '@core/middleware/auth'
import { LogController } from '@core/controllers/LogController'

// æ‹¡å¼µæ©Ÿèƒ½ã®åˆ©ç”¨
import { customAuthMiddleware } from '@extensions/middleware/customAuth'

// ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ã®åˆ©ç”¨
import { SalesReportService } from '@custom/services/SalesReportService'
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```typescript
// å…±é€šã‚³ã‚¢æ©Ÿèƒ½ã®åˆ©ç”¨
import { LogMonitoring } from '@core/components/log-monitoring'
import { useLogService } from '@core/composables/useLogService'
import type { Log } from '@core/types/log'

// ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ã®åˆ©ç”¨
import { SalesAnalytics } from '@custom/components/SalesAnalytics'
```

### âŒ ç¦æ­¢äº‹é …
```typescript
// âŒ ç›¸å¯¾ãƒ‘ã‚¹ã§ã®core/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { prisma } from '../core/lib/prisma'
import { LogMonitoring } from '../../core/components/log-monitoring'

// âŒ Prismaã®å€‹åˆ¥ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
import { PrismaClient } from '@prisma/client'
const prisma = new PrismaClient()  // çµ¶å¯¾ç¦æ­¢
```

## ğŸš€ å®Ÿæ–½ã—ãŸä½œæ¥­

### Phase 1: åŸºç›¤æ§‹ç¯‰
1. âœ… ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆï¼ˆcore/extensions/customï¼‰
2. âœ… README.mdä½œæˆï¼ˆå„å±¤ã®ä½¿ç”¨æ–¹æ³•ã‚¬ã‚¤ãƒ‰ï¼‰
3. âœ… ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šï¼ˆvite.config.ts, tsconfig.jsonï¼‰

### Phase 2: ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œ
4. âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ core/ ç§»è¡Œï¼ˆ23ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   - Prismaçµ±åˆã€èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€ãƒ­ã‚°ç›£è¦–ã€æ¨©é™ç®¡ç†
5. âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ core/ ç§»è¡Œï¼ˆ36ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   - ãƒ­ã‚°ç›£è¦–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€å…±é€šUIã€èªè¨¼API
6. âœ… ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ custom/ ç§»è¡Œï¼ˆ29ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   - ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€çµ„ç¹”ç®¡ç†ã€ãƒ¬ãƒãƒ¼ãƒˆ
7. âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ custom/ ç§»è¡Œï¼ˆ37ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
   - å…¨ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ä¼æ¥­å›ºæœ‰API

### Phase 3: ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¿®æ­£
8. âœ… ä¸€æ‹¬ä¿®æ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆãƒ»å®Ÿè¡Œ
9. âœ… ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä¿®æ­£
   - router/index.ts - @custom/views/
   - index.ts - @core/@custom æŒ¯ã‚Šåˆ†ã‘

## ğŸ“Š ç§»è¡Œçµæœçµ±è¨ˆ

| é …ç›® | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | åˆè¨ˆ |
|-----|------------|--------------|------|
| **core/** | 23ãƒ•ã‚¡ã‚¤ãƒ« | 36ãƒ•ã‚¡ã‚¤ãƒ« | 59 |
| **custom/** | 29ãƒ•ã‚¡ã‚¤ãƒ« | 37ãƒ•ã‚¡ã‚¤ãƒ« | 66 |
| **ç§»è¡Œæ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«æ•°** | 52 | 73 | **125** |

## ğŸ”„ æ¬¡ã«å®Ÿæ–½ã™ã¹ãä½œæ¥­

### å„ªå…ˆåº¦: é«˜
1. **å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ** - TypeScriptã‚¨ãƒ©ãƒ¼ç¢ºèª
   ```bash
   cd workspace/frontend && npm run type-check
   cd workspace/backend && npm run type-check
   ```

2. **ã‚µãƒ¼ãƒèµ·å‹•ãƒ†ã‚¹ãƒˆ** - å‹•ä½œç¢ºèª
   ```bash
   docker compose up -d
   ```

3. **ESLintä¿è­·è¨­å®š** - core/ã¸ã®ç›¸å¯¾ãƒ‘ã‚¹ç¦æ­¢ãƒ«ãƒ¼ãƒ«è¿½åŠ 

### å„ªå…ˆåº¦: ä¸­
4. **æ®‹å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†** - ç§»è¡Œã•ã‚Œã¦ã„ãªã„å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤
5. **ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ** - å…¨æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
6. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°** - APIä»•æ§˜æ›¸ç­‰ã®å‚ç…§ãƒ‘ã‚¹æ›´æ–°

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½¿ç”¨ï¼ˆå¿…é ˆéµå®ˆï¼‰
```typescript
// âœ… æ­£ã—ã„ä½¿ç”¨æ–¹æ³•
import { prisma } from '@core/lib/prisma'

// âŒ çµ¶å¯¾ç¦æ­¢
import { PrismaClient } from '@prisma/client'
const prisma = new PrismaClient()  // æ¥ç¶šãƒ—ãƒ¼ãƒ«æ¯æ¸‡ã®åŸå› 
```

### core/ ã®å¤‰æ›´ç¦æ­¢
- `core/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯**å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã§ã™
- ä¼æ¥­å›ºæœ‰ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯ `custom/` ã§å®Ÿè£…ã—ã¦ãã ã•ã„
- å…±é€šæ©Ÿèƒ½ã®æ‹¡å¼µã¯ `extensions/` ã§å®Ÿè£…ã—ã¦ãã ã•ã„

### ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹å¿…é ˆä½¿ç”¨
- ç›¸å¯¾ãƒ‘ã‚¹ï¼ˆ../core/ã€../../core/ï¼‰ã¯ç¦æ­¢
- å¿…ãš `@core/`ã€`@custom/`ã€`@extensions/` ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [é–‹ç™ºã‚¬ã‚¤ãƒ‰](../07_ã‚¬ã‚¤ãƒ‰/02_é–‹ç™ºã‚¬ã‚¤ãƒ‰.md)
- [CLAUDE.md](../../CLAUDE.md)
- [æ‹¡å¼µæ©Ÿèƒ½ã‚¬ã‚¤ãƒ‰](../../workspace/frontend/src/extensions/README.md)
- [ä¼æ¥­å›ºæœ‰æ©Ÿèƒ½ã‚¬ã‚¤ãƒ‰](../../workspace/frontend/src/custom/README.md)

## âœ… ç§»è¡Œå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ
- [x] README.mdä½œæˆ
- [x] ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š
- [x] ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼ˆ125ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- [x] ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¹ä¸€æ‹¬ä¿®æ­£
- [x] ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆä¿®æ­£
- [ ] å‹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
- [ ] ã‚µãƒ¼ãƒèµ·å‹•ãƒ†ã‚¹ãƒˆ
- [ ] ESLintä¿è­·è¨­å®š
- [ ] å…¨æ©Ÿèƒ½å‹•ä½œç¢ºèª

---

**ç§»è¡Œå®Œäº†æ—¥**: 2025-10-01
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ã‚µãƒ¼ãƒèµ·å‹•å¾Œã®å‹•ä½œç¢ºèª
