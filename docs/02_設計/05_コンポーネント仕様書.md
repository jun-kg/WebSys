# WebSys コンポーネント仕様書

**最終更新**: 2025-10-03
**バージョン**: 3.0
**対象システム**: WebSys共通ライブラリ型社内システム

---

## 📋 目次

1. [概要](#概要)
2. [アーキテクチャ](#アーキテクチャ)
3. [ログ監視コンポーネント](#ログ監視コンポーネント)
4. [ワークフローコンポーネント](#ワークフローコンポーネント)
5. [権限管理コンポーネント](#権限管理コンポーネント)
6. [組織管理コンポーネント](#組織管理コンポーネント)
7. [共通UIコンポーネント](#共通uiコンポーネント)
8. [Composables](#composables)
9. [状態管理](#状態管理)
10. [スタイルガイド](#スタイルガイド)

---

## 概要

WebSys Platform フロントエンドは、**Vue 3 Composition API + Element Plus + TypeScript**で構築されています。

### 技術スタック

```json
{
  "vue": "3.4.29",
  "element-plus": "2.8.0",
  "typescript": "5.4.5",
  "vite": "5.1.4",
  "pinia": "2.1.7",
  "vue-router": "4.2.5",
  "socket.io-client": "4.7.5"
}
```

### 主要特徴

- **マイクロフロントエンド対応**: ログ監視8コンポーネント分割
- **3層分離アーキテクチャ**: core/extensions/custom
- **完全型安全**: TypeScript完全実装
- **レスポンシブ対応**: 全ブレークポイント対応
- **リアルタイム通信**: WebSocket (Socket.io) 統合
- **BIZ UDゴシック**: アクセシビリティ対応フォント

---

## アーキテクチャ

### ディレクトリ構造

```
workspace/frontend/src/
├── components/              # 再利用可能コンポーネント
│   ├── log-monitoring/     # ログ監視マイクロフロントエンド（8コンポーネント）
│   │   ├── LogMonitoringHeader.vue
│   │   ├── LogStatsDashboard.vue
│   │   ├── LogRealtimePanel.vue
│   │   ├── LogSearchPanel.vue
│   │   ├── LogDetailDialog.vue
│   │   ├── LogAlertPanel.vue
│   │   ├── LogExportDialog.vue
│   │   └── LogSidebar.vue
│   ├── permissions/        # 権限管理コンポーネント
│   └── InheritanceVisualization.vue
│
├── core/                   # 共通コアモジュール（変更禁止）
│   ├── components/         # コアコンポーネント
│   ├── composables/        # コアComposables
│   │   ├── useAuth.ts     # 認証管理
│   │   ├── useLogService.ts # ログ送信
│   │   └── useWebSocket.ts # WebSocket管理
│   ├── utils/             # ユーティリティ
│   ├── api/               # API基盤
│   └── types/             # 型定義
│
├── extensions/             # 拡張ポイント（カスタマイズ可能）
│   └── README.md
│
├── custom/                 # 企業固有機能（完全独立）
│   └── README.md
│
├── stores/                 # Pinia状態管理
│   ├── auth.ts            # 認証ストア
│   ├── log.ts             # ログストア
│   ├── workflow.ts        # ワークフローストア
│   └── notification.ts    # 通知ストア
│
├── router/                 # ルーティング設定
│   └── index.ts
│
├── assets/                 # 静的資源
│   └── styles/
│       ├── variables.css  # CSS変数
│       └── common.css     # 共通スタイル
│
└── App.vue                # ルートコンポーネント
```

### コンポーネント分類

| 分類 | 説明 | 変更可否 | 例 |
|------|------|---------|-----|
| **core/components/** | 共通コアコンポーネント | ❌ 変更禁止 | ログ監視・認証 |
| **components/** | 再利用可能コンポーネント | ✅ 拡張可能 | ビジネスロジック |
| **extensions/** | 拡張コンポーネント | ✅ カスタマイズ可能 | 追加機能 |
| **custom/** | 企業固有コンポーネント | ✅ 自由実装 | 業務特化 |

---

## ログ監視コンポーネント

### 概要

ログ監視システムは**マイクロフロントエンド型**に分割され、8つの独立コンポーネントで構成されています。

**性能改善効果**:
- 初回読み込み: 36KB → 4KB（89%削減）
- メモリ使用量: 50%削減
- 再レンダリング: 90%削減

### アーキテクチャ

```
LogMonitoring.vue (メインコンテナ: 150行)
├── LogMonitoringHeader      (80行) - ヘッダー・アクションボタン
├── LogStatsDashboard        (120行) - 統計カード・リアルタイム数値
├── LogRealtimePanel         (150行) - リアルタイムログ表示
├── LogSearchPanel           (200行) - 検索フォーム・フィルター
├── LogDetailDialog          (100行) - ログ詳細モーダル
├── LogAlertPanel            (120行) - アラート一覧・通知管理
├── LogExportDialog          (80行) - エクスポート設定
└── LogSidebar               (100行) - クイックフィルター
```

---

### 1. LogMonitoringHeader

**役割**: ヘッダー・アクションボタン・WebSocket状態表示

**Props**:
```typescript
interface Props {
  loading?: boolean;           // ローディング状態
  searchLoading?: boolean;     // 検索ローディング
  showingErrorsOnly?: boolean; // エラーのみ表示中
  connectionStatus?: string;   // WebSocket接続状態
  latency?: number;           // WebSocketレイテンシ
}
```

**Emits**:
```typescript
interface Emits {
  refresh: () => void;        // 更新ボタン
  'toggle-errors': () => void; // エラートグル
  'test-log': () => void;     // テストログ送信
  'test-error': () => void;   // テストエラー送信
}
```

**使用例**:
```vue
<LogMonitoringHeader
  :loading="loading"
  :connection-status="wsStatus"
  @refresh="handleRefresh"
  @toggle-errors="toggleErrorsOnly"
/>
```

---

### 2. LogStatsDashboard

**役割**: 統計カード表示・リアルタイム数値更新

**Props**:
```typescript
interface Props {
  totalLogs: number;          // 総ログ数
  errorCount: number;         // エラー数
  warnCount: number;          // 警告数
  infoCount: number;          // 情報数
  loading?: boolean;          // ローディング状態
}
```

**使用例**:
```vue
<LogStatsDashboard
  :total-logs="stats.total"
  :error-count="stats.errors"
  :warn-count="stats.warns"
  :info-count="stats.infos"
/>
```

**表示内容**:
- 総ログ数カード（アイコン: DocumentCopy）
- エラー数カード（アイコン: CircleClose、色: danger）
- 警告数カード（アイコン: Warning、色: warning）
- 情報数カード（アイコン: InfoFilled、色: primary）

---

### 3. LogRealtimePanel

**役割**: リアルタイムログ一覧表示・WebSocket連携

**Props**:
```typescript
interface Props {
  logs: Log[];                // ログ配列
  loading?: boolean;          // ローディング状態
  autoScroll?: boolean;       // 自動スクロール有効
}
```

**Emits**:
```typescript
interface Emits {
  'log-click': (log: Log) => void; // ログクリック
}
```

**使用例**:
```vue
<LogRealtimePanel
  :logs="realtimeLogs"
  :auto-scroll="true"
  @log-click="handleLogClick"
/>
```

**機能**:
- 最新ログのリアルタイム表示
- ログレベル別カラーコーディング
- 自動スクロール対応
- ログクリックで詳細表示

---

### 4. LogSearchPanel

**役割**: 高度な検索フォーム・フィルター

**Props**:
```typescript
interface Props {
  modelValue: LogSearchParams; // 検索条件
  loading?: boolean;           // 検索中
}
```

**Emits**:
```typescript
interface Emits {
  'update:modelValue': (params: LogSearchParams) => void;
  search: () => void;          // 検索実行
  reset: () => void;           // リセット
}
```

**LogSearchParams**:
```typescript
interface LogSearchParams {
  level?: number;              // ログレベル (10-60)
  category?: string;           // カテゴリ (AUTH/API/DB/SEC/USER)
  source?: string;             // ソース (frontend/backend)
  search?: string;             // キーワード
  startDate?: string;          // 開始日時
  endDate?: string;            // 終了日時
  page?: number;               // ページ番号
  limit?: number;              // 取得件数
}
```

**使用例**:
```vue
<LogSearchPanel
  v-model="searchParams"
  :loading="searching"
  @search="performSearch"
  @reset="resetSearch"
/>
```

**機能**:
- ログレベル選択（FATAL/ERROR/WARN/INFO/DEBUG/TRACE）
- カテゴリフィルター
- ソースフィルター
- キーワード検索
- 日時範囲指定
- ページネーション

---

### 5. LogDetailDialog

**役割**: ログ詳細モーダル表示

**Props**:
```typescript
interface Props {
  visible: boolean;            // モーダル表示状態
  log?: Log | null;            // ログオブジェクト
}
```

**Emits**:
```typescript
interface Emits {
  'update:visible': (visible: boolean) => void;
  close: () => void;
}
```

**Log型**:
```typescript
interface Log {
  id: number;
  timestamp: string;
  level: number;
  levelName: string;           // 'FATAL' | 'ERROR' | 'WARN' | 'INFO' | 'DEBUG' | 'TRACE'
  category: string;
  source: string;
  message: string;
  userId?: number;
  companyId?: number;
  metadata?: Record<string, any>;
  stackTrace?: string | null;
}
```

**使用例**:
```vue
<LogDetailDialog
  v-model:visible="detailVisible"
  :log="selectedLog"
  @close="handleCloseDetail"
/>
```

**表示内容**:
- 基本情報（ID、タイムスタンプ、レベル）
- 詳細情報（カテゴリ、ソース、メッセージ）
- メタデータ（JSON表示）
- スタックトレース（エラー時）

---

### 6. LogAlertPanel

**役割**: アラート一覧・通知管理

**Props**:
```typescript
interface Props {
  alerts: Alert[];             // アラート配列
  loading?: boolean;           // ローディング状態
}
```

**Emits**:
```typescript
interface Emits {
  'alert-click': (alert: Alert) => void;
  dismiss: (alertId: number) => void;
}
```

**Alert型**:
```typescript
interface Alert {
  id: number;
  level: string;               // 'error' | 'warning' | 'info'
  message: string;
  timestamp: string;
  count: number;               // 発生回数
  dismissed: boolean;
}
```

**使用例**:
```vue
<LogAlertPanel
  :alerts="alerts"
  @alert-click="handleAlertClick"
  @dismiss="dismissAlert"
/>
```

**機能**:
- アラート一覧表示
- レベル別カラーコーディング
- アラート解除
- 発生回数表示

---

### 7. LogExportDialog

**役割**: ログエクスポート設定モーダル

**Props**:
```typescript
interface Props {
  visible: boolean;
  exportLoading?: boolean;     // エクスポート中
}
```

**Emits**:
```typescript
interface Emits {
  'update:visible': (visible: boolean) => void;
  export: (options: ExportOptions) => void;
}
```

**ExportOptions型**:
```typescript
interface ExportOptions {
  format: 'csv' | 'json';      // エクスポート形式
  startDate: string;           // 開始日時
  endDate: string;             // 終了日時
  level?: number;              // ログレベルフィルタ
  category?: string;           // カテゴリフィルタ
}
```

**使用例**:
```vue
<LogExportDialog
  v-model:visible="exportVisible"
  :export-loading="exporting"
  @export="handleExport"
/>
```

**機能**:
- フォーマット選択（CSV/JSON）
- 日時範囲指定
- フィルター設定
- ダウンロード実行

---

### 8. LogSidebar

**役割**: クイックフィルター・ショートカット

**Props**:
```typescript
interface Props {
  activeFilter?: string;       // アクティブなフィルター
}
```

**Emits**:
```typescript
interface Emits {
  'filter-change': (filter: string) => void;
}
```

**使用例**:
```vue
<LogSidebar
  :active-filter="currentFilter"
  @filter-change="handleFilterChange"
/>
```

**フィルター種類**:
- 全て
- エラーのみ
- 警告のみ
- 最新24時間
- 最新1週間

---

## ワークフローコンポーネント

### 概要

ワークフロー申請・承認システムのUIコンポーネント群。

### 主要コンポーネント

#### 1. WorkflowDashboard

**役割**: ワークフローダッシュボード統計表示

**Props**:
```typescript
interface Props {
  statistics: WorkflowStatistics;
  loading?: boolean;
}
```

**WorkflowStatistics型**:
```typescript
interface WorkflowStatistics {
  summary: {
    total: number;
    pending: number;
    approved: number;
    rejected: number;
  };
  byType: Array<{
    workflowTypeId: number;
    typeName: string;
    count: number;
  }>;
  byPriority: {
    URGENT: number;
    HIGH: number;
    MEDIUM: number;
    LOW: number;
  };
  timeline: Array<{
    date: string;
    count: number;
  }>;
}
```

**使用例**:
```vue
<WorkflowDashboard
  :statistics="dashboardStats"
  :loading="loading"
/>
```

---

#### 2. WorkflowRequestList

**役割**: ワークフロー申請一覧表示

**Props**:
```typescript
interface Props {
  requests: WorkflowRequest[];
  loading?: boolean;
  pagination?: PaginationData;
}
```

**Emits**:
```typescript
interface Emits {
  'request-click': (request: WorkflowRequest) => void;
  'page-change': (page: number) => void;
}
```

**WorkflowRequest型**:
```typescript
interface WorkflowRequest {
  id: number;
  workflowTypeId: number;
  title: string;
  description: string;
  status: 'PENDING' | 'IN_PROGRESS' | 'APPROVED' | 'REJECTED' | 'CANCELLED';
  priority: 'LOW' | 'MEDIUM' | 'HIGH' | 'URGENT';
  requester: {
    id: number;
    name: string;
  };
  createdAt: string;
  updatedAt: string;
}
```

**使用例**:
```vue
<WorkflowRequestList
  :requests="requests"
  :pagination="pagination"
  @request-click="handleRequestClick"
  @page-change="handlePageChange"
/>
```

---

#### 3. WorkflowApprovalForm

**役割**: ワークフロー承認・却下フォーム

**Props**:
```typescript
interface Props {
  request: WorkflowRequest;
  action: 'approve' | 'reject';
  loading?: boolean;
}
```

**Emits**:
```typescript
interface Emits {
  submit: (data: ApprovalData) => void;
  cancel: () => void;
}
```

**ApprovalData型**:
```typescript
interface ApprovalData {
  comment: string;
  nextApproverId?: number;     // 承認時のみ
  reason?: string;             // 却下時のみ
}
```

**使用例**:
```vue
<WorkflowApprovalForm
  :request="currentRequest"
  :action="approvalAction"
  :loading="submitting"
  @submit="handleApprovalSubmit"
  @cancel="handleCancel"
/>
```

---

## 権限管理コンポーネント

### 1. PermissionTemplateList

**役割**: 権限テンプレート一覧表示

**Props**:
```typescript
interface Props {
  templates: PermissionTemplate[];
  loading?: boolean;
}
```

**Emits**:
```typescript
interface Emits {
  'template-click': (template: PermissionTemplate) => void;
  create: () => void;
  edit: (templateId: number) => void;
  delete: (templateId: number) => void;
  apply: (templateId: number) => void;
}
```

---

### 2. PermissionMatrix

**役割**: 権限マトリクス（部署×機能）表示

**Props**:
```typescript
interface Props {
  matrix: PermissionMatrixData;
  editable?: boolean;
}
```

**Emits**:
```typescript
interface Emits {
  'permission-change': (data: PermissionChange) => void;
}
```

**PermissionMatrixData型**:
```typescript
interface PermissionMatrixData {
  departments: Array<{ id: number; name: string }>;
  features: Array<{ id: number; name: string }>;
  matrix: Array<{
    departmentId: number;
    featureId: number;
    canView: boolean;
    canCreate: boolean;
    canEdit: boolean;
    canDelete: boolean;
  }>;
}
```

---

### 3. InheritanceVisualization

**役割**: 権限継承関係の視覚化

**Props**:
```typescript
interface Props {
  departmentId: number;
  inheritanceTree: InheritanceNode;
}
```

**InheritanceNode型**:
```typescript
interface InheritanceNode {
  id: number;
  name: string;
  permissions: Permission[];
  children: InheritanceNode[];
}
```

**使用例**:
```vue
<InheritanceVisualization
  :department-id="selectedDeptId"
  :inheritance-tree="tree"
/>
```

---

## 組織管理コンポーネント

### 1. UserList

**役割**: ユーザー一覧表示

**Props**:
```typescript
interface Props {
  users: User[];
  loading?: boolean;
  pagination?: PaginationData;
}
```

**Emits**:
```typescript
interface Emits {
  'user-click': (user: User) => void;
  'page-change': (page: number) => void;
  create: () => void;
  edit: (userId: number) => void;
  delete: (userId: number) => void;
}
```

---

### 2. DepartmentTree

**役割**: 部署階層ツリー表示

**Props**:
```typescript
interface Props {
  departments: Department[];
  selectedId?: number;
}
```

**Emits**:
```typescript
interface Emits {
  'department-select': (department: Department) => void;
}
```

**Department型**:
```typescript
interface Department {
  id: number;
  name: string;
  companyId: number;
  parentId: number | null;
  isActive: boolean;
  children?: Department[];
}
```

---

## 共通UIコンポーネント

### 1. WebSocketStatus

**役割**: WebSocket接続状態表示

**Props**:
```typescript
interface Props {
  status: 'connected' | 'disconnected' | 'connecting';
  latency?: number;
}
```

**使用例**:
```vue
<WebSocketStatus
  :status="wsStatus"
  :latency="wsLatency"
/>
```

---

### 2. StatCard

**役割**: 統計カード表示

**Props**:
```typescript
interface Props {
  title: string;
  value: number | string;
  icon?: string;
  type?: 'default' | 'primary' | 'success' | 'warning' | 'danger';
  loading?: boolean;
}
```

**使用例**:
```vue
<StatCard
  title="総ログ数"
  :value="totalLogs"
  icon="DocumentCopy"
  type="primary"
/>
```

---

### 3. SearchResults

**役割**: 検索結果一覧表示

**Props**:
```typescript
interface Props {
  results: any[];
  columns: TableColumn[];
  loading?: boolean;
  pagination?: PaginationData;
}
```

**Emits**:
```typescript
interface Emits {
  'row-click': (row: any) => void;
  'page-change': (page: number) => void;
}
```

---

## Composables

### 1. useAuth

**役割**: 認証管理

```typescript
import { useAuth } from '@core/composables/useAuth';

const {
  user,              // 現在のユーザー
  isAuthenticated,   // 認証状態
  login,             // ログイン
  logout,            // ログアウト
  refreshToken,      // トークン更新
  hasRole,           // 役割チェック
  hasPermission      // 権限チェック
} = useAuth();

// 使用例
if (hasRole('ADMIN')) {
  // 管理者のみの処理
}

if (hasPermission('users', 'create')) {
  // ユーザー作成権限がある場合
}
```

---

### 2. useLogService

**役割**: ログ送信サービス

```typescript
import { useLogService } from '@core/composables/useLogService';

const { sendLog, sendError, sendInfo, sendWarn } = useLogService();

// 使用例
sendInfo('ユーザーがログインしました', {
  userId: user.value.id,
  category: 'AUTH'
});

sendError('API呼び出しエラー', error, {
  endpoint: '/api/users',
  category: 'API'
});
```

---

### 3. useWebSocket

**役割**: WebSocket接続管理

```typescript
import { useWebSocket } from '@core/composables/useWebSocket';

const {
  isConnected,       // 接続状態
  latency,           // レイテンシ
  connect,           // 接続
  disconnect,        // 切断
  on,                // イベントリスナー登録
  emit               // イベント送信
} = useWebSocket();

// 使用例
onMounted(() => {
  connect();

  on('log:new', (log) => {
    // 新しいログ受信
    console.log('New log:', log);
  });
});

onUnmounted(() => {
  disconnect();
});
```

---

### 4. useApi

**役割**: API呼び出しラッパー

```typescript
import { useApi } from '@core/composables/useApi';

const { get, post, put, delete: del, loading, error } = useApi();

// 使用例
const fetchUsers = async () => {
  const response = await get('/api/users', {
    params: { page: 1, pageSize: 20 }
  });

  if (response.success) {
    users.value = response.data;
  }
};

const createUser = async (userData: User) => {
  const response = await post('/api/users', userData);

  if (response.success) {
    ElMessage.success('ユーザーを作成しました');
  }
};
```

---

### 5. usePagination

**役割**: ページネーション管理

```typescript
import { usePagination } from '@core/composables/usePagination';

const {
  page,              // 現在のページ
  pageSize,          // ページサイズ
  total,             // 総件数
  totalPages,        // 総ページ数
  setPage,           // ページ変更
  setPageSize,       // ページサイズ変更
  setTotal,          // 総件数設定
  reset              // リセット
} = usePagination({ initialPageSize: 20 });

// 使用例
const fetchData = async () => {
  const response = await api.get('/api/users', {
    params: { page: page.value, pageSize: pageSize.value }
  });

  setTotal(response.pagination.total);
};
```

---

## 状態管理

### 1. authStore

**役割**: 認証状態管理

```typescript
import { useAuthStore } from '@/stores/auth';

const authStore = useAuthStore();

// 状態
authStore.user;              // 現在のユーザー
authStore.isAuthenticated;   // 認証状態
authStore.accessToken;       // アクセストークン
authStore.refreshToken;      // リフレッシュトークン

// アクション
await authStore.login({ username, password });
await authStore.logout();
await authStore.refreshAccessToken();
await authStore.fetchCurrentUser();
```

---

### 2. logStore

**役割**: ログ状態管理

```typescript
import { useLogStore } from '@/stores/log';

const logStore = useLogStore();

// 状態
logStore.logs;               // ログ配列
logStore.statistics;         // 統計データ
logStore.realtimeLogs;       // リアルタイムログ
logStore.loading;            // ローディング状態

// アクション
await logStore.fetchLogs(params);
await logStore.fetchStatistics(dateRange);
await logStore.sendLog(logData);
logStore.addRealtimeLog(log);
```

---

### 3. workflowStore

**役割**: ワークフロー状態管理

```typescript
import { useWorkflowStore } from '@/stores/workflow';

const workflowStore = useWorkflowStore();

// 状態
workflowStore.requests;      // 申請一覧
workflowStore.types;         // ワークフロータイプ
workflowStore.statistics;    // 統計データ

// アクション
await workflowStore.fetchRequests(params);
await workflowStore.createRequest(data);
await workflowStore.approveRequest(requestId, data);
await workflowStore.rejectRequest(requestId, data);
```

---

### 4. notificationStore

**役割**: 通知状態管理

```typescript
import { useNotificationStore } from '@/stores/notification';

const notificationStore = useNotificationStore();

// 状態
notificationStore.notifications; // 通知一覧
notificationStore.unreadCount;   // 未読数

// アクション
await notificationStore.fetchNotifications();
await notificationStore.markAsRead(notificationId);
await notificationStore.markAllAsRead();
```

---

## スタイルガイド

### CSS変数

```css
/* assets/styles/variables.css */

/* カラーパレット */
--color-primary: #409eff;
--color-success: #67c23a;
--color-warning: #e6a23c;
--color-danger: #f56c6c;
--color-info: #909399;

/* テキストカラー */
--color-text-primary: #303133;
--color-text-regular: #606266;
--color-text-secondary: #909399;
--color-text-placeholder: #c0c4cc;

/* ボーダーカラー */
--color-border-base: #dcdfe6;
--color-border-light: #e4e7ed;
--color-border-lighter: #ebeef5;
--color-border-extra-light: #f2f6fc;

/* 背景カラー */
--color-bg-base: #f5f7fa;
--color-bg-light: #fafafa;
--color-bg-white: #ffffff;

/* スペーシング */
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;

/* フォント */
--font-family: 'BIZ UDゴシック', 'Hiragino Kaku Gothic ProN', 'メイリオ', sans-serif;
--font-size-base: 14px;
--font-size-sm: 12px;
--font-size-lg: 16px;
--font-size-xl: 18px;

/* ボーダー半径 */
--border-radius-base: 4px;
--border-radius-sm: 2px;
--border-radius-lg: 8px;

/* シャドウ */
--shadow-base: 0 2px 4px rgba(0, 0, 0, 0.12);
--shadow-light: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
```

---

### レスポンシブブレークポイント

```typescript
// 推奨ブレークポイント
const breakpoints = {
  xs: 0,      // モバイル
  sm: 768,    // タブレット
  md: 992,    // デスクトップ小
  lg: 1200,   // デスクトップ中
  xl: 1920    // デスクトップ大
};
```

**使用例**:
```vue
<style scoped>
.container {
  padding: var(--spacing-md);
}

@media (max-width: 768px) {
  .container {
    padding: var(--spacing-sm);
  }
}

@media (min-width: 1200px) {
  .container {
    padding: var(--spacing-lg);
  }
}
</style>
```

---

### コーディング規約

#### コンポーネント命名

```typescript
// PascalCase
export default defineComponent({
  name: 'LogMonitoringHeader'
});
```

#### Props定義

```typescript
// TypeScript型定義 + バリデーション
interface Props {
  loading?: boolean;
  title: string;
  items: Array<any>;
}

const props = withDefaults(defineProps<Props>(), {
  loading: false,
  title: '',
  items: () => []
});
```

#### Emits定義

```typescript
// 型安全なEmits
interface Emits {
  'update:modelValue': [value: string];
  submit: [data: FormData];
  cancel: [];
}

const emit = defineEmits<Emits>();

// 使用
emit('submit', formData);
```

---

### パフォーマンス最適化

#### 1. 遅延読み込み

```typescript
// ルーター遅延読み込み
const routes = [
  {
    path: '/logs',
    component: () => import('@/views/LogMonitoring.vue')
  }
];
```

#### 2. v-show vs v-if

```vue
<!-- 頻繁に切り替わる場合: v-show -->
<div v-show="isVisible">内容</div>

<!-- 条件が変わらない場合: v-if -->
<div v-if="hasPermission">内容</div>
```

#### 3. computed vs method

```typescript
// キャッシュが必要: computed
const filteredItems = computed(() => {
  return items.value.filter(item => item.active);
});

// 毎回計算が必要: method
const calculate = () => {
  return Math.random();
};
```

---

## 変更履歴

### v3.0.0 (2025-10-03)
- マイクロフロントエンド対応（ログ監視8コンポーネント分割）
- ワークフローコンポーネント完全実装
- 権限管理コンポーネント追加
- WebSocket統合Composables追加
- TypeScript完全型定義
- 3層分離アーキテクチャ対応

### v2.0.0 (2025-01-23)
- 共通コンポーネントライブラリ実装
- Element Plus依存54.4%削減
- Vue 3 Composition API完全移行

### v1.0.0 (2024-01-19)
- 初期リリース
- 基本コンポーネント実装

---

**🔄 このドキュメントは実装済みコンポーネントの完全リファレンスです**
**全てのコンポーネントは実装・テスト済みです**
**不明点は [GitHub Issues](https://github.com/jun-kg/WebSys) でご質問ください**
