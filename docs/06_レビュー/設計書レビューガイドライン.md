# 設計書レビューガイドライン

**作成日**: 2025-10-05
**対象**: 全設計書・仕様書
**目的**: 設計品質の保証・実装前の問題検出

---

## 📋 目次

1. [レビュー観点一覧](#レビュー観点一覧)
2. [各観点の詳細チェック項目](#各観点の詳細チェック項目)
3. [レビュープロセス](#レビュープロセス)
4. [評価基準](#評価基準)
5. [レビューチェックリスト](#レビューチェックリスト)

---

## レビュー観点一覧

### 必須レビュー観点（8観点）

| 観点 | 目的 | 重要度 | 主要確認項目 |
|------|------|--------|-------------|
| **1. 使用者観点** | エンドユーザーの使いやすさ | CRITICAL | 操作性・理解容易性・効率性 |
| **2. コーダー観点** | 実装可能性・保守性 | CRITICAL | 実装明確性・コード品質・テスト容易性 |
| **3. 設計者観点** | 設計の完全性・一貫性 | CRITICAL | 要件カバー・整合性・拡張性 |
| **4. システム観点** | システム全体への影響 | CRITICAL | 性能・スケーラビリティ・互換性 |
| **5. UI/UX観点** | ユーザー体験の品質 | HIGH | デザイン一貫性・アクセシビリティ |
| **6. セキュリティ観点** | セキュリティリスク | CRITICAL | 脆弱性・認証認可・データ保護 |
| **7. 共通化観点** | 再利用性・標準化 | HIGH | コンポーネント共通化・パターン適用 |
| **8. 運用観点** | 運用・保守の容易性 | HIGH | 監視・ログ・障害対応 |

### 追加推奨レビュー観点（7観点）

| 観点 | 目的 | 重要度 | 主要確認項目 |
|------|------|--------|-------------|
| **9. データ観点** | データ整合性・品質 | HIGH | データモデル・マイグレーション・整合性制約 |
| **10. 国際化観点** | 多言語対応・地域対応 | MEDIUM | i18n対応・タイムゾーン・通貨 |
| **11. アクセシビリティ観点** | 障害者対応・WCAG準拠 | MEDIUM | スクリーンリーダー・キーボード操作 |
| **12. パフォーマンス観点** | 性能・スケーラビリティ | HIGH | レスポンスタイム・リソース効率 |
| **13. テスト観点** | テスト容易性・カバレッジ | HIGH | テスト戦略・自動化・モック |
| **14. ドキュメント観点** | ドキュメント品質 | MEDIUM | 完全性・正確性・わかりやすさ |
| **15. 法令遵守観点** | コンプライアンス | MEDIUM | 個人情報保護・監査要件 |

**合計**: 15観点

---

## 各観点の詳細チェック項目

### 1. 使用者観点（エンドユーザー視点）

#### 目的
実際にシステムを使用するユーザーにとって使いやすいか

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 1.1 | **操作の直感性** | ユーザーがマニュアルなしで操作できるか | CRITICAL |
| 1.2 | **エラーメッセージの明確性** | エラー発生時に原因と対処法が明確か | CRITICAL |
| 1.3 | **操作フローの効率性** | 目的達成までのクリック数・画面遷移が最小か | HIGH |
| 1.4 | **学習コストの低さ** | 新規ユーザーがすぐに使えるか | HIGH |
| 1.5 | **フィードバックの適切性** | 操作結果がすぐにわかるか | HIGH |
| 1.6 | **ユーザーの期待との一致** | 一般的な操作習慣と一致しているか | MEDIUM |
| 1.7 | **元に戻す操作の提供** | 誤操作時に復旧できるか | HIGH |
| 1.8 | **ヘルプ・ガイダンスの充実** | 困ったときのサポートがあるか | MEDIUM |

#### レビュー方法
- ユーザーストーリーを読み、実際の操作をシミュレーション
- 画面遷移図を確認し、無駄な遷移がないか確認
- エラーケースを想定し、適切なメッセージが設計されているか確認

---

### 2. コーダー観点（実装者視点）

#### 目的
設計書から実装が明確にでき、保守しやすいコードが書けるか

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 2.1 | **実装仕様の明確性** | 設計書だけで実装できるか | CRITICAL |
| 2.2 | **コード例の提供** | 実装例・サンプルコードがあるか | HIGH |
| 2.3 | **API仕様の完全性** | リクエスト・レスポンス・エラーが明確か | CRITICAL |
| 2.4 | **データ型の明示** | TypeScript型定義が明確か | CRITICAL |
| 2.5 | **エラーハンドリング** | 例外処理の方針が明確か | CRITICAL |
| 2.6 | **テスト容易性** | ユニットテストが書きやすいか | HIGH |
| 2.7 | **依存関係の明示** | 使用するライブラリ・モジュールが明確か | HIGH |
| 2.8 | **命名規則の一貫性** | 変数名・関数名・ファイル名が統一されているか | MEDIUM |
| 2.9 | **コメント要否の明示** | 複雑なロジックにコメントが必要か明確か | MEDIUM |
| 2.10 | **リファクタリング容易性** | 将来の変更に対応しやすいか | MEDIUM |

#### レビュー方法
- 設計書を見ながら実際にコードを書いてみる（疑似コーディング）
- 不明点・曖昧な点をリストアップ
- サンプルコードの動作可能性を確認

---

### 3. 設計者観点（アーキテクト視点）

#### 目的
設計として完全で、一貫性があり、拡張可能か

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 3.1 | **要件カバレッジ** | 全要件が設計に反映されているか | CRITICAL |
| 3.2 | **設計の一貫性** | 設計方針が全体で統一されているか | CRITICAL |
| 3.3 | **モジュール分割の適切性** | 責務が明確に分離されているか（SRP） | HIGH |
| 3.4 | **依存関係の適切性** | 循環依存がないか（DIP） | HIGH |
| 3.5 | **拡張性の確保** | 将来の機能追加に対応できるか（OCP） | HIGH |
| 3.6 | **デザインパターンの適用** | 適切なパターンが使われているか | MEDIUM |
| 3.7 | **SOLID原則の遵守** | オブジェクト指向設計原則に従っているか | HIGH |
| 3.8 | **DRY原則の遵守** | 重複がないか | MEDIUM |
| 3.9 | **インターフェース設計** | 抽象化が適切か | HIGH |
| 3.10 | **バージョニング戦略** | API・データベースのバージョン管理が考慮されているか | MEDIUM |

#### レビュー方法
- クラス図・シーケンス図で設計を可視化
- SOLID原則との照合
- 既存設計との整合性確認

---

### 4. システム観点（システム全体視点）

#### 目的
システム全体への影響を評価し、非機能要件を満たすか

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 4.1 | **性能要件の達成** | レスポンスタイム・スループットが要件を満たすか | CRITICAL |
| 4.2 | **スケーラビリティ** | ユーザー数・データ量増加に対応できるか | HIGH |
| 4.3 | **既存機能への影響** | 既存機能が壊れないか（後方互換性） | CRITICAL |
| 4.4 | **データベース影響** | テーブル変更・マイグレーションが安全か | CRITICAL |
| 4.5 | **API互換性** | 既存APIクライアントが影響を受けないか | HIGH |
| 4.6 | **リソース使用量** | メモリ・CPU・ストレージが適切か | HIGH |
| 4.7 | **同時実行制御** | 排他制御・トランザクション管理が適切か | HIGH |
| 4.8 | **障害時の影響範囲** | 部分障害で全体が止まらないか | HIGH |
| 4.9 | **デプロイ影響** | ダウンタイムなしでデプロイできるか | MEDIUM |
| 4.10 | **ログ出力設計** | 運用監視に必要なログが出るか | HIGH |

#### レビュー方法
- 負荷試験シナリオの妥当性確認
- 既存システムとの依存関係分析
- マイグレーション計画のレビュー

---

### 5. UI/UX観点（ユーザー体験視点）

#### 目的
統一されたデザインで、使いやすいUIが提供されるか

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 5.1 | **デザインシステムとの整合性** | Element Plusの使い方が統一されているか | HIGH |
| 5.2 | **レスポンシブデザイン** | モバイル・タブレット・デスクトップ対応 | HIGH |
| 5.3 | **カラーパレットの一貫性** | 色使いが統一されているか | MEDIUM |
| 5.4 | **フォント・タイポグラフィ** | 文字サイズ・行間が適切か | MEDIUM |
| 5.5 | **アイコンの一貫性** | アイコンセットが統一されているか | MEDIUM |
| 5.6 | **余白・配置の統一** | レイアウトが一貫しているか | MEDIUM |
| 5.7 | **操作フィードバック** | ボタン押下時の視覚的フィードバックがあるか | HIGH |
| 5.8 | **ローディング表示** | 処理中の待機表示が適切か | HIGH |
| 5.9 | **バリデーション表示** | エラー表示が視覚的にわかりやすいか | HIGH |
| 5.10 | **情報階層の明確性** | 重要情報が視覚的に強調されているか | MEDIUM |

#### レビュー方法
- モックアップ・ワイヤーフレームの確認
- Element Plusコンポーネントガイドとの照合
- 既存画面との一貫性確認

---

### 6. セキュリティ観点（セキュリティ視点）

#### 目的
セキュリティリスクを最小化し、安全なシステムを実現

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 6.1 | **認証の適切性** | 認証方式が安全か（JWT・MFA等） | CRITICAL |
| 6.2 | **認可の完全性** | 権限チェックが全APIで実施されているか | CRITICAL |
| 6.3 | **入力検証** | SQLインジェクション・XSS対策があるか | CRITICAL |
| 6.4 | **個人情報保護** | PII（個人識別情報）が適切に保護されているか | CRITICAL |
| 6.5 | **パスワード管理** | ハッシュ化・ソルト・強度チェックが適切か | CRITICAL |
| 6.6 | **セッション管理** | タイムアウト・固定化攻撃対策があるか | HIGH |
| 6.7 | **CSRF対策** | トークン検証があるか | HIGH |
| 6.8 | **暗号化** | 通信・保存データの暗号化が適切か | HIGH |
| 6.9 | **監査ログ** | セキュリティイベントが記録されるか | HIGH |
| 6.10 | **権限エスカレーション防止** | 権限昇格の可能性がないか | CRITICAL |
| 6.11 | **機密情報の露出防止** | エラーメッセージで内部情報が漏れないか | HIGH |
| 6.12 | **アクセス制限** | IPホワイトリスト・レート制限があるか | MEDIUM |

#### レビュー方法
- OWASP Top 10との照合
- 脅威モデリング（STRIDE）
- セキュリティチェックリスト確認

---

### 7. 共通化観点（再利用性視点）

#### 目的
コンポーネント・ロジックの共通化で保守性向上

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 7.1 | **コンポーネント共通化** | 再利用可能なコンポーネントとして設計されているか | HIGH |
| 7.2 | **ユーティリティ関数** | 共通ロジックが関数化されているか | HIGH |
| 7.3 | **定数・設定の外部化** | ハードコードがなく、設定ファイル化されているか | HIGH |
| 7.4 | **composable/hook設計** | ロジックの再利用性が高いか | HIGH |
| 7.5 | **サービス層の分離** | ビジネスロジックが再利用可能か | HIGH |
| 7.6 | **型定義の共通化** | TypeScript型が共通定義されているか | MEDIUM |
| 7.7 | **エラーハンドリングの統一** | エラー処理が共通化されているか | HIGH |
| 7.8 | **バリデーションルールの共通化** | 検証ロジックが再利用可能か | MEDIUM |
| 7.9 | **API呼び出しの統一** | APIクライアントが共通化されているか | HIGH |
| 7.10 | **既存共通コンポーネントの活用** | 既存の共通モジュールを使っているか | HIGH |

#### レビュー方法
- 既存コンポーネント一覧との照合
- コードの重複検出
- core/extensions/customの適切な配置確認

---

### 8. 運用観点（運用保守視点）

#### 目的
運用・保守が容易で、障害対応がスムーズか

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 8.1 | **ログ出力の充実** | トラブルシューティングに必要なログがあるか | CRITICAL |
| 8.2 | **監視ポイントの明示** | ヘルスチェック・メトリクスが取得できるか | HIGH |
| 8.3 | **障害時の影響範囲** | 部分障害で全体が止まらないか | HIGH |
| 8.4 | **ロールバック可能性** | 問題発生時に前バージョンに戻せるか | HIGH |
| 8.5 | **バックアップ・リストア** | データ復旧手順が明確か | HIGH |
| 8.6 | **設定変更の容易性** | 環境変数・設定ファイルで制御できるか | MEDIUM |
| 8.7 | **デバッグ情報** | 開発時にデバッグしやすいか | MEDIUM |
| 8.8 | **ドキュメントの充実** | 運用手順書・トラブルシューティングガイドがあるか | HIGH |
| 8.9 | **アラート設計** | 異常検知・通知の仕組みがあるか | HIGH |
| 8.10 | **メンテナンスモード** | 保守作業時にシステムを安全に停止できるか | MEDIUM |

#### レビュー方法
- 障害シナリオの想定とログ確認
- 運用手順書の妥当性確認
- 監視項目の網羅性確認

---

### 9. データ観点（データモデル視点）

#### 目的
データの整合性・品質を保証し、長期的に安定運用

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 9.1 | **正規化の適切性** | 第3正規形が達成されているか | HIGH |
| 9.2 | **制約の完全性** | NOT NULL・UNIQUE・FK制約が適切か | CRITICAL |
| 9.3 | **インデックス設計** | 検索性能のためのインデックスが適切か | HIGH |
| 9.4 | **マイグレーション戦略** | データ移行が安全に実行できるか | CRITICAL |
| 9.5 | **データ型の適切性** | カラムのデータ型が適切か | HIGH |
| 9.6 | **デフォルト値** | 適切なデフォルト値が設定されているか | MEDIUM |
| 9.7 | **論理削除vs物理削除** | 削除方針が明確か | HIGH |
| 9.8 | **タイムスタンプ管理** | createdAt・updatedAtが適切か | MEDIUM |
| 9.9 | **データサイズ見積もり** | 将来のデータ量増加が考慮されているか | MEDIUM |
| 9.10 | **リレーションの適切性** | 外部キー関係が正しいか | CRITICAL |

#### レビュー方法
- ER図の作成と確認
- データ量シミュレーション
- マイグレーションスクリプトのレビュー

---

### 10. 国際化観点（i18n視点）

#### 目的
多言語・多地域対応の準備

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 10.1 | **文言の外部化** | ハードコードされた文字列がないか | MEDIUM |
| 10.2 | **多言語リソース** | i18nファイルが整備されているか | MEDIUM |
| 10.3 | **日付・時刻フォーマット** | ロケールに応じた表示ができるか | MEDIUM |
| 10.4 | **通貨フォーマット** | 金額表示が国際化対応か | LOW |
| 10.5 | **タイムゾーン対応** | UTC保存・ローカル表示が適切か | MEDIUM |
| 10.6 | **文字エンコーディング** | UTF-8が統一されているか | HIGH |

#### レビュー方法
- ハードコード文字列の検出
- i18nファイルの網羅性確認

---

### 11. アクセシビリティ観点（a11y視点）

#### 目的
障害者・高齢者も使えるシステム実現

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 11.1 | **スクリーンリーダー対応** | aria属性が適切か | MEDIUM |
| 11.2 | **キーボード操作** | マウスなしで全操作できるか | MEDIUM |
| 11.3 | **コントラスト比** | WCAG 2.1 AA準拠（4.5:1以上） | MEDIUM |
| 11.4 | **フォーカス表示** | フォーカス位置が視覚的にわかるか | MEDIUM |
| 11.5 | **代替テキスト** | 画像にalt属性があるか | MEDIUM |

#### レビュー方法
- WCAG 2.1チェックリスト確認
- axe DevToolsでの自動チェック

---

### 12. パフォーマンス観点（性能視点）

#### 目的
高速で快適なユーザー体験の提供

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 12.1 | **レスポンスタイム目標** | API応答時間が200ms以内か | HIGH |
| 12.2 | **N+1クエリ対策** | 不要なDBクエリがないか | HIGH |
| 12.3 | **キャッシュ戦略** | 適切にキャッシュされているか | HIGH |
| 12.4 | **ページネーション** | 大量データの一覧表示が分割されているか | HIGH |
| 12.5 | **遅延ロード** | 必要な時だけデータ取得しているか | MEDIUM |
| 12.6 | **画像最適化** | 画像サイズが適切か | MEDIUM |
| 12.7 | **バンドルサイズ** | フロントエンドの初回ロードが小さいか | MEDIUM |

#### レビュー方法
- 性能要件との照合
- クエリ実行計画の確認
- Lighthouseスコア確認

---

### 13. テスト観点（品質保証視点）

#### 目的
テストしやすく、高品質なコードの実現

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 13.1 | **単体試験容易性** | モックしやすい設計か | HIGH |
| 13.2 | **テストカバレッジ目標** | 90%以上が達成可能か | HIGH |
| 13.3 | **テストシナリオ** | 正常系・異常系が網羅されているか | HIGH |
| 13.4 | **自動化可能性** | CI/CDで自動実行できるか | HIGH |
| 13.5 | **テストデータ** | テスト用データ準備が容易か | MEDIUM |

#### レビュー方法
- テスト仕様書の妥当性確認
- テストケース網羅性確認

---

### 14. ドキュメント観点（文書品質視点）

#### 目的
正確で理解しやすいドキュメント提供

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 14.1 | **完全性** | 必要な情報が全て記載されているか | HIGH |
| 14.2 | **正確性** | 誤りがないか | CRITICAL |
| 14.3 | **明瞭性** | わかりやすい表現か | HIGH |
| 14.4 | **一貫性** | 用語・表記が統一されているか | MEDIUM |
| 14.5 | **図表の適切性** | 図・表で理解が促進されているか | MEDIUM |
| 14.6 | **更新容易性** | メンテナンスしやすいか | MEDIUM |

#### レビュー方法
- ドキュメントレビューチェックリスト確認
- 第三者による読解テスト

---

### 15. 法令遵守観点（コンプライアンス視点）

#### 目的
法令・規制への準拠

#### チェック項目

| # | チェック項目 | 詳細 | 優先度 |
|---|------------|------|--------|
| 15.1 | **個人情報保護法** | PIIの適切な取り扱い | CRITICAL |
| 15.2 | **GDPR対応** | EU市民データの適切な管理 | MEDIUM |
| 15.3 | **監査証跡** | 変更履歴・アクセスログの保存 | HIGH |
| 15.4 | **データ保存期間** | 法定保存期間の遵守 | HIGH |
| 15.5 | **利用規約・同意** | 明示的な同意取得 | MEDIUM |

#### レビュー方法
- 法務部門との協議
- コンプライアンスチェックリスト確認

---

## レビュープロセス

### ステップ1: 事前準備
- [ ] レビュー対象設計書の特定
- [ ] レビュー観点の選定（15観点から必要なものを選択）
- [ ] レビュアーのアサイン
- [ ] レビュー期限の設定

### ステップ2: 個別レビュー
- [ ] 各観点でチェックリストに基づいてレビュー
- [ ] 問題点・改善提案をリスト化
- [ ] 重要度（CRITICAL/HIGH/MEDIUM/LOW）を付与

### ステップ3: レビュー会議
- [ ] 発見事項の共有
- [ ] 優先順位の決定
- [ ] 対応方針の合意

### ステップ4: フォローアップ
- [ ] 指摘事項の修正
- [ ] 再レビュー（必要に応じて）
- [ ] 承認

---

## 評価基準

### 各観点の評価スコア

| スコア | 評価 | 基準 |
|--------|------|------|
| **5** | 優秀 | 全チェック項目をクリア・ベストプラクティス適用 |
| **4** | 良好 | 重要項目クリア・軽微な改善点あり |
| **3** | 合格 | 必須項目クリア・改善余地あり |
| **2** | 要改善 | 重要項目に問題あり・修正必須 |
| **1** | 不合格 | CRITICAL項目に問題あり・再設計必要 |

### 総合評価

| 総合スコア | 判定 | アクション |
|-----------|------|-----------|
| **4.5以上** | 承認 | 実装開始可能 |
| **3.5-4.4** | 条件付承認 | 軽微な修正後に実装開始 |
| **2.5-3.4** | 要修正 | 修正後に再レビュー |
| **2.5未満** | 却下 | 再設計が必要 |

---

## レビューチェックリスト

### 設計書レビュー総合チェックシート

| 観点 | 優先度 | スコア | 問題点 | 改善提案 | 対応状況 |
|------|--------|--------|--------|----------|----------|
| 1. 使用者観点 | CRITICAL | /5 | | | |
| 2. コーダー観点 | CRITICAL | /5 | | | |
| 3. 設計者観点 | CRITICAL | /5 | | | |
| 4. システム観点 | CRITICAL | /5 | | | |
| 5. UI/UX観点 | HIGH | /5 | | | |
| 6. セキュリティ観点 | CRITICAL | /5 | | | |
| 7. 共通化観点 | HIGH | /5 | | | |
| 8. 運用観点 | HIGH | /5 | | | |
| 9. データ観点 | HIGH | /5 | | | |
| 10. 国際化観点 | MEDIUM | /5 | | | |
| 11. アクセシビリティ観点 | MEDIUM | /5 | | | |
| 12. パフォーマンス観点 | HIGH | /5 | | | |
| 13. テスト観点 | HIGH | /5 | | | |
| 14. ドキュメント観点 | MEDIUM | /5 | | | |
| 15. 法令遵守観点 | MEDIUM | /5 | | | |

**総合スコア**: ___/5.0
**判定**: ☐承認 ☐条件付承認 ☐要修正 ☐却下

---

## 付録

### A. レビュー観点の選択ガイド

#### 必須観点（全設計書で実施）
- 使用者観点
- コーダー観点
- 設計者観点
- システム観点
- セキュリティ観点

#### 機能種別による追加観点

| 機能種別 | 追加推奨観点 |
|---------|-------------|
| **UI機能** | UI/UX観点、アクセシビリティ観点 |
| **API機能** | パフォーマンス観点、テスト観点 |
| **データベース変更** | データ観点、運用観点 |
| **権限・認証機能** | セキュリティ観点（重点）、法令遵守観点 |
| **共通コンポーネント** | 共通化観点、テスト観点 |

---

**作成日**: 2025-10-05
**バージョン**: 1.0
**最終更新**: 2025-10-05
