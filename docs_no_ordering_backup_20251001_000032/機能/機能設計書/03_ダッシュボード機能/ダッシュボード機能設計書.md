# ダッシュボード機能設計書

## 📋 機能概要

### 目的
- システム全体の状況を一目で把握
- 重要な統計情報の表示
- クイックアクション機能の提供
- システム監視・ヘルスチェック

### 対象画面
- Dashboard.vue (ダッシュボード画面)

## 🏗️ システム構成

### 技術スタック
- **フロントエンド**: Vue 3 + TypeScript
- **UIコンポーネント**: Element Plus
- **レイアウト**: CSS Grid + Flexbox
- **リアルタイム更新**: Timer-based Polling

## 📊 画面構成

### レイアウト設計
```
┌─────────────────────────────────────────────────────────┐
│                     統計サマリー                        │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│ │総ユーザー│ │アクティブ│ │今日の訪問│ │処理済み  │ │
│ │   数    │ │ユーザー  │ │   数    │ │タスク   │ │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │
├─────────────────────────────────────────────────────────┤
│          最近のアクティビティ          │ クイックアクション │
│ ┌─────────────────────────────────┐   │ ┌─────────────┐ │
│ │時間  │ユーザー│アクション│ステータス│   │ │新規ユーザー │ │
│ │10:30 │田中   │ログイン │成功     │   │ │追加        │ │
│ │10:25 │山田   │データ更新│成功     │   │ ├─────────────┤ │
│ │10:20 │鈴木   │ログアウト│成功     │   │ │データ      │ │
│ └─────────────────────────────────┘   │ │エクスポート │ │
│                                        │ ├─────────────┤ │
│                                        │ │システム設定 │ │
│                                        │ ├─────────────┤ │
│                                        │ │レポート生成 │ │
│                                        │ └─────────────┘ │
│                                        ├─────────────────┤
│                                        │  システム状態   │
│                                        │ ┌─────────────┐ │
│                                        │ │サーバー:正常│ │
│                                        │ │DB:     正常│ │
│                                        │ │メモリ: 45% │ │
│                                        │ │CPU:   30% │ │
│                                        │ └─────────────┘ │
└─────────────────────────────────────────────────────────┘
```

## 📈 統計サマリー仕様

### 表示項目
| 項目 | 表示内容 | データソース | 更新頻度 |
|------|----------|--------------|----------|
| 総ユーザー数 | 登録ユーザー総数 | Users API | リアルタイム |
| アクティブユーザー | 過去24時間のログインユーザー | Activity Log | 5分間隔 |
| 今日の訪問数 | 本日のページビュー数 | Analytics | 1分間隔 |
| 処理済みタスク | 本日完了したタスク数 | Task API | リアルタイム |

### Statisticコンポーネント設計
```typescript
interface StatisticData {
  title: string       // 項目名
  value: number       // 数値
  suffix?: string     // 単位（件、人、回など）
  variant: string     // 表示スタイル
  trend?: {           // トレンド情報（将来拡張）
    direction: 'up' | 'down' | 'stable'
    percentage: number
  }
}
```

## 📋 アクティビティログ仕様

### 表示項目
| カラム | 幅 | データ型 | 説明 |
|--------|----|---------|----- |
| 時間 | 180px | DateTime | HH:mm:ss形式 |
| ユーザー | 150px | String | ユーザー名 |
| アクション | flex | String | 実行した操作 |
| ステータス | 100px | Enum | 成功/警告/エラー |

### データ構造
```typescript
interface ActivityLog {
  time: string          // 実行時刻
  user: string          // ユーザー名
  action: string        // 実行アクション
  status: 'success' | 'warning' | 'error'  // ステータス
}

const activityData: ActivityLog[] = [
  {
    time: '2025-01-20 10:30:00',
    user: '田中太郎',
    action: 'ユーザー「山田花子」を更新しました',
    status: 'success'
  }
]
```

## ⚡ クイックアクション仕様

### アクションボタン
| アクション | アイコン | 機能 | 遷移先 |
|------------|----------|------|--------|
| 新規ユーザー追加 | Plus | ユーザー追加ダイアログ | - |
| データエクスポート | Download | CSV/Excel出力 | - |
| システム設定 | Setting | 設定画面遷移 | /settings |
| レポート生成 | Document | レポート画面遷移 | /reports |

### ボタン仕様
- **スタイル**: Element Plus Primary Button
- **レスポンシブ**: モバイルでは縦積み表示
- **アイコン**: Element Plus Icons
- **フィードバック**: クリック時にメッセージ表示

## 🖥️ システム状態監視

### 監視項目
| 項目 | 表示形式 | しきい値 | アラート |
|------|----------|----------|----------|
| APIサーバー | ステータスタグ | - | 異常時に赤表示 |
| データベース | ステータスタグ | - | 異常時に赤表示 |
| メモリ使用率 | プログレスバー | 80%以上で警告 | 90%以上で危険 |
| CPU使用率 | プログレスバー | 70%以上で警告 | 85%以上で危険 |

### プログレスバー仕様
```typescript
interface SystemStatus {
  memory: {
    usage: number      // 使用率（0-100）
    status: 'normal' | 'warning' | 'danger'
  }
  cpu: {
    usage: number      // 使用率（0-100）
    status: 'normal' | 'warning' | 'danger'
  }
}
```

## 📱 レスポンシブ設計

### ブレイクポイント対応
- **PC (≥992px)**: 3カラムレイアウト
- **タブレット (768-991px)**: 2カラムレイアウト
- **モバイル (≤767px)**: 1カラムレイアウト

### レイアウト変更
```scss
// PC: 統計4列
.stats-row {
  .el-col { @media (min-width: 992px) { span: 6; } }
}

// タブレット: 統計2列
.stats-row {
  .el-col { @media (max-width: 991px) { span: 12; } }
}

// モバイル: 統計1列
.stats-row {
  .el-col { @media (max-width: 767px) { span: 24; } }
}
```

## 🔄 データ更新仕様

### 自動更新
- **統計サマリー**: 30秒間隔
- **アクティビティログ**: 10秒間隔
- **システム状態**: 5秒間隔

### 手動更新
- リフレッシュボタン（ヘッダー部分）
- プルトゥリフレッシュ（モバイル）

### 更新アニメーション
- データ更新時にローディング表示
- 新しいアクティビティは強調表示
- 数値変化時にカウントアップアニメーション

## 🧪 テスト仕様

### 単体テスト
- [ ] 統計データ計算ロジック
- [ ] アクティビティログフィルタリング
- [ ] システム状態閾値判定
- [ ] レスポンシブレイアウト

### 結合テスト
- [ ] データ自動更新機能
- [ ] クイックアクション動作
- [ ] エラーハンドリング

### パフォーマンステスト
- [ ] 大量データ表示性能
- [ ] メモリリーク確認
- [ ] 長時間稼働安定性

## 🚀 実装状況

### 完了済み
- ✅ 基本レイアウト実装
- ✅ 統計サマリー表示
- ✅ アクティビティログ表示
- ✅ クイックアクション実装
- ✅ システム状態表示
- ✅ レスポンシブ対応

### 今後の拡張
- ⚠️ リアルタイム更新（WebSocket）
- ⚠️ グラフ・チャート表示
- ⚠️ フィルタリング機能
- ⚠️ カスタマイズ可能ウィジェット
- ⚠️ エクスポート機能

## 📋 関連ドキュメント

- [認証機能設計書](../01_認証機能/)
- [ユーザー管理機能設計書](../02_ユーザー管理機能/)
- [共通コンポーネント設計書](../04_共通コンポーネント/)
- [レスポンシブ対応設計書](../05_レスポンシブ対応/)

---

**作成日**: 2025年1月20日
**最終更新**: 2025年1月20日
**作成者**: Claude
**レビュー者**: -